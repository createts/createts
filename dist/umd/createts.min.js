!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.createts=e():t.createts=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=44)}([function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(6),a=i(21),h=i(4),u=i(2),c=i(5),l=i(14),p=i(10),d=function(t){function e(e,i,n,r,o,s){void 0===i&&(i=!0),void 0===n&&(n=!0);var a=t.call(this,e,i,n)||this;return a.nativeEvent=null,a.srcElement=r,a.touchItem=o,a.currentTarget=s,o&&(a.identifier=o.identifier,a.stageX=o.stageX,a.stageY=o.stageY),a}return r(e,t),e.prototype.toString=function(){return"[XObjectEvent (type="+this.type+")]"},e}(s.Event);e.XObjectEvent=d,function(t){t[t.DISABLED=1]="DISABLED",t[t.CACHED=2]="CACHED",t[t.INVALIDATE=3]="INVALIDATE"}(o||(o={}));var f=function(t){function e(e){var i=t.call(this)||this;i.id=void 0,i.rect=new h.Rect(0,0,0,0),i.cacheState=o.DISABLED,i.style=new c.Style;var n=i.getDefaultStyle();return n&&i.style.apply(n),e&&(e.attributes.style&&i.style.apply(c.Style.parse(e.attributes.style)),e.attributes.id&&(i.id=e.attributes.id)),i}return r(e,t),e.prototype.getDefaultStyle=function(){},e.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},e.prototype.dispatchEvent=function(t){if(t.bubbles&&this.parent){for(var e=this,i=[e];e.parent;)i.push(e.parent),e=e.parent;for(var n=0,r=i;n<r.length;n++){var o=r[n];if(t.currentTarget=o,t.propagationStopped)break;o.doDispatchEvent(t)}}else this.doDispatchEvent(t);return!t.defaultPrevented},e.prototype.isVisible=function(){return!!(this.style.visibility!==c.Visibility.HIDDEN&&this.style.display!==c.Display.NONE&&this.style.alpha>0&&this.style.scaleX>0&&this.style.scaleY>0)},e.prototype.getCacheCanvas=function(){return this.cacheCanvas},e.prototype.isCached=function(){return this.cacheState!==o.DISABLED},e.prototype.cache=function(){this.cacheState!==o.CACHED&&(this.cacheState=o.INVALIDATE)},e.prototype.uncache=function(){this.cacheState=o.DISABLED,delete this.cacheCanvas},e.prototype.getAnimationFactory=function(){for(var t=this;t;){if(t.animationFactory)return t.animationFactory;t=t.parent}},e.prototype.animate=function(t,e){if(void 0===e&&(e=!0),"boolean"==typeof t)return this.getAnimationFactory().create(this,t);var i=void 0===t?this:t;return this.getAnimationFactory().create(i,e)},e.prototype.stopAnimation=function(t){void 0===t&&(t=this),this.getAnimationFactory().removeByTarget(t)},e.prototype.invalidateCache=function(){this.cacheState!==o.DISABLED?this.cacheState=o.INVALIDATE:console.warn("Cache does not enabled for "+this.toString())},e.prototype.draw=function(t,e){if(void 0===e&&(e=!1),t.filter=this.style.filter||"none",e||this.cacheState===o.DISABLED)l.DrawUtils.drawElement(this,t);else{if(this.cacheCanvas||(this.cacheCanvas=u.Runtime.get().newCanvas()),this.cacheState!==o.CACHED){this.cacheCanvas.width=this.rect.width,this.cacheCanvas.height=this.rect.height;var i=this.cacheCanvas.getContext("2d");i&&l.DrawUtils.drawElement(this,i),this.cacheState=o.CACHED}t.drawImage(this.cacheCanvas,0,0,this.rect.width,this.rect.height)}},e.prototype.drawBackground=function(t,e,i){this.style.background&&this.style.background.draw(this,t,e,i)},e.prototype.drawContent=function(t){},e.prototype.updateContext=function(t){var e=this.getMatrix();t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),t.globalAlpha*=this.style.alpha},e.prototype.localToGlobal=function(t,e){return this.getConcatenatedMatrix().transformPoint(t,e)},e.prototype.globalToLocal=function(t,e){return this.getConcatenatedMatrix().invert().transformPoint(t,e)},e.prototype.localToLocal=function(t,e,i){var n=this.localToGlobal(t,e);return i.globalToLocal(n.x,n.y)},e.prototype.getMatrix=function(t){var e=t&&t.identity()||new a.Matrix2D,i=this.style.perspectiveOriginX.getValue(this.rect.width),n=this.style.perspectiveOriginY.getValue(this.rect.height);return e.appendTransform(this.rect.x+i+this.style.transformX.getValue(this.rect.width),this.rect.y+n+this.style.transformY.getValue(this.rect.height),this.style.scaleX,this.style.scaleY,this.style.rotation,this.style.skewX,this.style.skewY,i,n)},e.prototype.getConcatenatedMatrix=function(t){for(var e=this.getMatrix(t),i=this.parent;i;)e.prependMatrix(i.getMatrix()),i=i.parent;return e},e.prototype.hitTest=function(t,e){return t>=0&&t<this.rect.width&&e>=0&&e<this.rect.height},e.prototype.layout=function(){this.calculateSize()},e.prototype.calculateSize=function(){this.parent&&p.LayoutUtils.updateSize(this,this.parent.getContentWidth(),this.parent.getContentHeight())},e.prototype.css=function(t){return this.style.apply(t),this.dispatchEvent(new d("update",!0,!0,this)),this},e.prototype.getLineHeight=function(){return this.style.font?this.style.lineHeight?this.style.lineHeight.getValue(this.style.font.size):this.style.font.lineHeight?this.style.font.lineHeight.getValue(this.style.font.size):this.style.font.size:this.style.lineHeight?this.style.lineHeight.getValue(0):0},e.prototype.getWidth=function(){return this.rect.width},e.prototype.getHeight=function(){return this.rect.height},e.prototype.getPaddingWidth=function(){return this.rect.width-(this.style.borderLeft?this.style.borderLeft.width:0)-(this.style.borderRight?this.style.borderRight.width:0)},e.prototype.getPaddingHeight=function(){return this.rect.height-(this.style.borderTop?this.style.borderTop.width:0)-(this.style.borderBottom?this.style.borderBottom.width:0)},e.prototype.getPaddingRect=function(){var t=new h.Rect(0,0,this.rect.width,this.rect.height);return this.style.borderLeft&&(t.x+=this.style.borderLeft.width,t.width-=this.style.borderLeft.width),this.style.borderRight&&(t.width-=this.style.borderRight.width),this.style.borderTop&&(t.y+=this.style.borderTop.width,t.height-=this.style.borderTop.width),this.style.borderBottom&&(t.height-=this.style.borderBottom.width),t},e.prototype.getContentWidth=function(){return this.rect.width-(this.style.paddingLeft?this.style.paddingLeft.getValue(this.rect.width):0)-(this.style.paddingRight?this.style.paddingRight.getValue(this.rect.width):0)-(this.style.borderLeft?this.style.borderLeft.width:0)-(this.style.borderRight?this.style.borderRight.width:0)},e.prototype.getContentHeight=function(){return this.rect.height-(this.style.paddingTop?this.style.paddingTop.getValue(this.rect.height):0)-(this.style.paddingBottom?this.style.paddingBottom.getValue(this.rect.height):0)-(this.style.borderTop?this.style.borderTop.width:0)-(this.style.borderBottom?this.style.borderBottom.width:0)},e.prototype.getContentRect=function(){var t=new h.Rect(0,0,this.rect.width,this.rect.height);if(this.style.paddingLeft){var e=this.style.paddingLeft.getValue(this.rect.width);t.x+=e,t.width-=e}if(this.style.paddingRight&&(t.width-=this.style.paddingRight.getValue(this.rect.width)),this.style.paddingTop){var i=this.style.paddingTop.getValue(this.rect.height);t.y+=i,t.height-=i}return this.style.paddingBottom&&(t.height-=this.style.paddingBottom.getValue(this.rect.height)),this.style.borderLeft&&(t.x+=this.style.borderLeft.width,t.width-=this.style.borderLeft.width),this.style.borderRight&&(t.width-=this.style.borderRight.width),this.style.borderTop&&(t.y+=this.style.borderTop.width,t.height-=this.style.borderTop.width),this.style.borderBottom&&(t.height-=this.style.borderBottom.width),t},e.prototype.getOuterWidth=function(){var t=this.parent?this.parent.getWidth():0;return this.rect.width+(this.style.marginLeft?this.style.marginLeft.getValue(t):0)+(this.style.marginRight?this.style.marginRight.getValue(t):0)},e.prototype.getOuterHeight=function(){var t=this.parent?this.parent.getHeight():0;return this.rect.height+(this.style.marginTop?this.style.marginTop.getValue(t):0)+(this.style.marginBottom?this.style.marginBottom.getValue(t):0)},e.prototype.isChildOf=function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},e.prototype.toString=function(){return"[XObject (id="+this.id+")]"},e.prototype.doDispatchEvent=function(e){if(e.currentTarget=this,e.stage&&e.touchItem&&this.willTrigger(e.type)){var i=e.stage.localToLocal(e.touchItem.stageX,e.touchItem.stageY,this);e.x=i.x,e.y=i.y,e.touchItem.x=i.x,e.touchItem.y=i.y}t.prototype.dispatchEvent.call(this,e)},e}(s.EventDispatcher);e.XObject=f;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(f);e.IContainer=g},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(6),h=i(29),u=i(2),c=i(12);!function(t){t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(o||(o={})),function(t){t.IMAGE="image",t.APNG="apng",t.JSON="json"}(s=e.ResourceType||(e.ResourceType={}));var l=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.progress=i,r.currentTarget=n,r}return r(e,t),e}(a.Event);e.ResourceRegistryEvent=l;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e}return r(e,t),e.prototype.load=function(t){switch(t.type){case s.IMAGE:this.loadImage(t);break;case s.APNG:this.loadApng(t);break;case s.JSON:this.loadJson(t)}},e.prototype.setAllowOriginPattern=function(t){this.allowOriginPattern=t},e.prototype.isAllowOrigin=function(t){return!this.allowOriginPattern||(void 0===c.URLUtils.getOrigin(t)||this.allowOriginPattern.test(t))},e.prototype.loadImage=function(t){var e=this;u.Runtime.get().loadImage({url:t.url,allowOrigin:this.isAllowOrigin(t.url),onLoad:function(i){t.resource=i,e.onLoad(t)},onError:function(i){t.error=i,e.onError(t)},onProgress:function(i){t.loadedBytes=i.loadedBytes,t.totalBytes=i.totalBytes,e.onProgress(t)}})},e.prototype.loadJson=function(t){var e=this;u.Runtime.get().loadText({url:t.url,allowOrigin:this.isAllowOrigin(t.url),onLoad:function(i){t.resource=JSON.parse(i),e.onLoad(t)},onError:function(i){t.error=i,e.onError(t)},onProgress:function(i){t.loadedBytes=i.loadedBytes,t.totalBytes=i.totalBytes,e.onProgress(t)}})},e.prototype.loadApng=function(t){var e=this;u.Runtime.get().loadArrayBuffer({url:t.url,allowOrigin:this.isAllowOrigin(t.url),onLoad:function(i){for(var n=h.ApngParser.parse(i),r={width:n.width,height:n.height,fps:1e3*n.frames.length/n.duration,frames:[],url:void 0,image:void 0},o=0,s=n.frames;o<s.length;o++){var a=s[o];r.frames.push({destX:a.left,destY:a.top,destWidth:a.width,destHeight:a.height,image:a.image})}t.resource=r,e.onLoad(t)},onError:function(i){console.warn("error while loading apng",i),t.error=i,e.onError(t)},onProgress:function(i){t.loadedBytes=i.loadedBytes,t.totalBytes=i.totalBytes,e.onProgress(t)}})},e.prototype.getTotalProgress=function(){for(var t=0,e=0,i=this.items;e<i.length;e++){t+=i[e].progress}return t/this.items.length},e.prototype.onProgress=function(t){t.state===o.LOADING&&t.totalBytes>0&&(t.progress=t.loadedBytes/t.totalBytes),this.dispatchEvent(new l("progress",this.getTotalProgress())),this.dispatchEvent(new l("itemprogress",t.totalBytes>0?t.loadedBytes/t.totalBytes:0,t))},e.prototype.onLoad=function(t){t.state=o.LOADED,t.loadedBytes=t.totalBytes,t.progress<1&&(t.progress=1,this.onProgress(t));for(var e=0,i=t.promiseHandlers;e<i.length;e++){i[e].resolve(t.resource)}t.promiseHandlers=[],this.dispatchEvent(new l("load",1,t));for(var n=!0,r=0,s=this.items;r<s.length;r++){if(s[r].state!==o.LOADED){n=!1;break}}n&&this.dispatchEvent(new l("done",1))},e.prototype.onError=function(t){t.state=o.ERROR;for(var e=0,i=t.promiseHandlers;e<i.length;e++){i[e].reject(t.error)}t.promiseHandlers=[],this.dispatchEvent(new l("error",this.getTotalProgress(),t))},e.prototype.add=function(t,e){var i=this;return void 0===e&&(e=s.IMAGE),new Promise((function(n,r){for(var s=0,a=i.items;s<a.length;s++){var h=a[s];if(h.url===t)return void(h.state===o.LOADED?n(h.resource):h.state===o.ERROR?r(h.error):h.promiseHandlers.push({resolve:n,reject:r}))}var u={url:t,type:e,resource:void 0,state:o.LOADING,progress:0,loadedBytes:0,totalBytes:0,promiseHandlers:[{resolve:n,reject:r}]};i.items.push(u),i.load(u)}))},e.prototype.get=function(t){for(var e=0,i=this.items;e<i.length;e++){var n=i[e];if(n.url===t)return n.state===o.LOADED?n.resource:void 0}},e.prototype.release=function(t){for(var e=0;e<this.items.length;++e){var i=this.items[e];if(i.url===t)return this.items.splice(e,1),i.promiseHandlers.length=0,i.resource}},e.DefaultInstance=new e,e}(a.EventDispatcher);e.ResourceRegistry=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(23),o=i(24),s=i(25);!function(t){t.WEBPAGE="webpage",t.WECHAT_MINI_GAME="wechat_mini_game",t.WECHAT_MINI_PROGRAM="wechat_mini_program"}(n=e.RuntimeType||(e.RuntimeType={}));var a=function(){function t(){}return t.setRuntimeType=function(t){this.runtimeType!==t&&(this.runtimeType=t,delete this.runtime)},t.getRuntimeType=function(){return this.runtimeType},t.get=function(){if(!this.runtime)switch(this.runtimeType){case n.WEBPAGE:this.runtime=new r.WebpageRuntime;break;case n.WECHAT_MINI_GAME:this.runtime=new o.WechatMiniGameRuntime;break;case n.WECHAT_MINI_PROGRAM:this.runtime=new s.WechatMiniProgramRuntime}return this.runtime},t.runtimeType=n.WEBPAGE,t}();e.Runtime=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r,o=i(0);!function(t){t[t.START=1]="START",t[t.TAG=2]="TAG",t[t.TEXT=3]="TEXT"}(n||(n={})),function(t){t[t.PENDING=0]="PENDING",t[t.START=1]="START",t[t.NAME=2]="NAME",t[t.EQ=3]="EQ",t[t.VALUE=4]="VALUE",t[t.VALUE_STARTED=5]="VALUE_STARTED"}(r||(r={}));var s=function(){function t(){}return t.registerTag=function(t,e){this.tagMap[t.toLowerCase()]=e},t.prototype.parse=function(t){for(var e=[],i=0,n=this.parseHtml(t);i<n.length;i++){var r=n[i],o=this.node2Component(r);o&&e.push(o)}return e},t.prototype.parseHtml=function(t){for(var e=[],i=[],o=t.length,s=n.START,a=0,h=null,u=!1,c=null,l=r.PENDING,p=0,d="",f=null,g={},v=0;v<o;++v){var y=t[v];switch(s){case n.START:"<"===y?(a=v,h=null,s=n.TAG,l=r.PENDING,p=0,d="",f=null,g={}):(a=v,s=n.TEXT);break;case n.TAG:if(h||!this.isSplitter(y)&&">"!==y&&"/"!==y&&'"'!==y&&"'"!==y||(h=t.substring(a+1,v),l=r.START),null===h)break;if(u?y===c&&(u=!1):"'"!==y&&'"'!==y||(u=!0,c=y),">"!==y||u)switch(l){case r.START:this.isSplitter(y)||"/"===y||(p=v,l=r.NAME),f=null;break;case r.NAME:this.isSplitter(y)?(d=t.substring(p,v),l=r.EQ):"="===y&&(d=t.substring(p,v),p=v+1,l=r.VALUE);break;case r.EQ:if(this.isSplitter(y))break;"="===y?(l=r.VALUE,p=v+1):(this.addAttr(g,d,""),l=r.START);break;case r.VALUE:if(this.isSplitter(y))break;'"'===y||"'"===y?(f=y,p=v+1):(f=null,p=v),l=r.VALUE_STARTED;break;case r.VALUE_STARTED:var m=!1,E=v;f?y===f&&(m=!0):!f&&this.isSplitter(y)&&(m=!0),m&&(this.addAttr(g,d,t.substring(p,E)),d="",l=r.START)}else{switch(l){case r.NAME:d=t.substring(p,v),this.addAttr(g,d,"");break;case r.EQ:this.addAttr(g,d,"");break;case r.VALUE:case r.VALUE_STARTED:this.addAttr(g,d,t.substring(p,v))}if("!--"===h.substring(0,3)){v-a>=6&&"--"===t.substring(v-2,v)&&(s=n.START);break}if(h&&"/"===h[0]){h=h.substring(1);for(var w=!1,T=0,b=i;T<b.length;T++){b[T].tag===h&&(w=!0)}if(w)for(;i.length>0;){if(!(R=i.pop())||R.tag===h)break}s=n.START}else{var R={children:[],tag:h,attributes:g};g={},i.length>0?(R.parent=i[i.length-1],i[i.length-1].children.push(R)):e.push(R),this.isCloseTag(h)||i.push(R),s=n.START}}break;case n.TEXT:if("<"===y){if(a<v)if((A=t.substring(a,v).trim()).length>0){R={children:[],tag:"TEXT",text:A,attributes:{}};i.length>0?(R.parent=i[i.length-1],i[i.length-1].children.push(R)):e.push(R)}s=n.TAG,h=null,a=v,l=r.PENDING,p=0,d="",f=null,g={}}}}switch(s){case n.TEXT:var A;if(a<v)if((A=t.substring(a,v).trim()).length>0){R={children:[],tag:"TEXT",text:A,attributes:{}};i.length>0?(R.parent=i[i.length-1],i[i.length-1].children.push(R)):e.push(R)}}for(var O=0,B=e;O<B.length;O++){R=B[O];this.trimTextNode(R)}return e},t.prototype.trimTextNode=function(t){if(1===t.children.length&&"TEXT"===t.children[0].tag)t.text=t.children[0].text,t.children.length=0;else for(var e=0,i=t.children;e<i.length;e++){var n=i[e];this.trimTextNode(n)}},t.prototype.node2Component=function(e){var i=t.tagMap[e.tag.toLowerCase()];if(i){var n=new i({attributes:e.attributes,text:e.text});if(e.children.length>0)if(n instanceof o.IContainer)for(var r=0,s=e.children;r<s.length;r++){var a=s[r],h=this.node2Component(a);h&&n.addChild(h)}else console.warn("component is not a container:"+n);return n}console.warn("unknown tag:"+e.tag.toLowerCase())},t.prototype.isSplitter=function(t){return" "===t||"\r"===t||"\n"===t||"\t"===t},t.prototype.isCloseTag=function(t){return"img"===t},t.prototype.addAttr=function(t,e,i){t[e.toLowerCase()]=i},t.tagMap={},t}();e.HtmlParser=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/^\s*[0-9]+\s+[0-9]+\s+[0-9]+\s+[0-9]+\s*$/,r=function(){function t(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}return t.of=function(e){if(n.test(e)){var i=e.split(/\s+/),r=parseFloat(i[0]);if(!isNaN(r)){var o=parseFloat(i[1]);if(!isNaN(o)){var s=parseFloat(i[2]);if(!isNaN(s)){var a=parseFloat(i[3]);if(!isNaN(a))return new t(r,o,s,a)}}}}},t.prototype.in=function(t,e){return t>=this.x&&e>=this.y&&t<this.x+this.width&&e<this.y+this.height},t.prototype.equals=function(t){return this.x===t.x&&this.y==this.y&&this.width===t.width&&this.height===t.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t}();e.Rect=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r,o,s,a,h,u,c,l,p=i(11),d=i(8),f=i(9),g=i(13),v=i(26),y=i(16),m=i(27),E=i(35),w=i(46),T=i(36),b=i(18),R=i(37);!function(t){t.CONTENT_BOX="content-box",t.BORDER_BOX="border-box"}(n=e.BoxSizing||(e.BoxSizing={})),function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center"}(r=e.TextAlign||(e.TextAlign={})),function(t){t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle"}(o=e.VerticalAlign||(e.VerticalAlign={})),function(t){t.STATIC="static",t.RELATIVE="relative",t.ABSOLUTE="absolute",t.FIXED="fixed"}(s=e.Position||(e.Position={})),function(t){t.INLINE="inline",t.BLOCK="block",t.NONE="none"}(a=e.Display||(e.Display={})),function(t){t.VISIBLE="visible",t.HIDDEN="hidden"}(h=e.Overflow||(e.Overflow={})),function(t){t.OUTER="outer",t.INNER="inner"}(u=e.TextBorderPosition||(e.TextBorderPosition={})),function(t){t.AUTO="auto",t.NONE="none",t.CROSS="cross",t.BLOCK="block"}(c=e.PointerEvents||(e.PointerEvents={})),function(t){t.VISIBLE="visible",t.HIDDEN="hidden"}(l=e.Visibility||(e.Visibility={}));var A=/([^\s:;]+)[\s]*:[\s]*([^;]+)/gm,O=function(){function t(){this.position=s.STATIC,this.display=a.INLINE,this.perspectiveOriginX=d.BaseValue.of("50%"),this.perspectiveOriginY=d.BaseValue.of("50%"),this.transformX=d.BaseValue.ZERO,this.transformY=d.BaseValue.ZERO,this.alpha=1,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.visibility=l.VISIBLE,this.boxSizing=n.CONTENT_BOX,this.color=f.Color.BLACK,this.overflow=h.VISIBLE,this.pointerEvents=c.AUTO,this.textBorderPosition=u.OUTER}return t.of=function(e){return(new t).apply(this.parse(e))},t.parse=function(t){for(var e={},i=0,n=v.StringUtils.matchAll(t,A);i<n.length;i++){var r=n[i];e[r[1].toLowerCase()]=r[2]}return e},t.prototype.apply=function(e){for(var i in e){var p=this.normalize(i),v=e[i]+"";switch(p){case"width":case"minWidth":case"maxWidth":case"height":case"minHeight":case"maxHeight":this[p]=d.BaseValue.of(v);break;case"position":this.position=g.EnumUtils.fromString(s,v,s.STATIC);break;case"display":this.display=g.EnumUtils.fromString(a,v,a.INLINE);break;case"left":case"right":case"top":case"bottom":this[p]=d.BaseValue.of(v);break;case"padding":var A=y.StyleUtils.parse4Dirs(v);A&&(this.paddingTop=A[0],this.paddingRight=A[1],this.paddingBottom=A[2],this.paddingLeft=A[3]);break;case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":this[p]=d.BaseValue.of(v);break;case"margin":var O=y.StyleUtils.parse4Dirs(v);O&&(this.marginTop=O[0],this.marginRight=O[1],this.marginBottom=O[2],this.marginLeft=O[3]);break;case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":this[p]=d.BaseValue.of(v);break;case"perspectiveOrigin":1===(B=v.split(/\s+/)).length?"auto"===v?(this.perspectiveOriginX=d.BaseValue.of("50%"),this.perspectiveOriginY=d.BaseValue.of("50%")):(this.perspectiveOriginX=d.BaseValue.of(v),this.perspectiveOriginY=d.BaseValue.of(v)):B.length>1&&(this.perspectiveOriginX="auto"===B[0]?d.BaseValue.of("50%"):d.BaseValue.of(B[0]),this.perspectiveOriginY="auto"===B[1]?d.BaseValue.of("50%"):d.BaseValue.of(B[1]));break;case"transform":var B;1===(B=v.split(/\s+/)).length?"auto"===v?(this.transformX=d.BaseValue.of("50%"),this.transformY=d.BaseValue.of("50%")):(this.transformX=d.BaseValue.of(v),this.transformY=d.BaseValue.of(v)):B.length>1&&(this.transformX="auto"===B[0]?d.BaseValue.of("50%"):d.BaseValue.of(B[0]),this.transformY="auto"===B[1]?d.BaseValue.of("50%"):d.BaseValue.of(B[1]));break;case"perspectiveOriginX":case"perspectiveOriginY":case"transformX":case"transformY":this[p]="auto"===v?d.BaseValue.of("50%"):d.BaseValue.of(v);break;case"scaleX":case"scaleY":case"skewX":case"skewY":case"alpha":case"aspectRatio":case"rotation":var S=parseFloat(v);isNaN(S)?console.warn("invalid "+p+" value: "+v):this[p]=S;break;case"scale":S=parseFloat(v);isNaN(S)?console.warn("invalid "+p+" value: "+v):this.scaleX=this.scaleY=S;break;case"visibility":this.visibility=g.EnumUtils.fromString(l,v,l.VISIBLE);break;case"background":this.background=m.Background.of(v);break;case"backgroundClip":this.background||(this.background=new m.Background),this.background.setClip(v);break;case"backgroundColor":this.background||(this.background=new m.Background),this.background.setColor(v);break;case"backgroundAttachment":this.background||(this.background=new m.Background),this.background.setAttachment(v);break;case"backgroundImage":this.background||(this.background=new m.Background),this.background.setImage(v);break;case"backgroundRepeat":this.background||(this.background=new m.Background),this.background.setRepeat(v);break;case"backgroundOrigin":this.background||(this.background=new m.Background),this.background.setOrigin(v);break;case"backgroundSize":this.background||(this.background=new m.Background),this.background.setSize(v);break;case"backgroundPosition":this.background||(this.background=new m.Background),this.background.setPosition(v);break;case"boxSizing":this.boxSizing=g.EnumUtils.fromString(n,v,n.CONTENT_BOX);break;case"color":var x=f.Color.of(v);x&&(this.color=x);break;case"font":this.font=T.Font.of(v);break;case"fontFamily":this.font||(this.font=new T.Font),this.font.family=v;break;case"fontWeight":this.font||(this.font=new T.Font),this.font.weight=g.EnumUtils.fromString(T.FontWeight,v,T.FontWeight.NORMAL);break;case"fontStyle":this.font||(this.font=new T.Font),this.font.style=g.EnumUtils.fromString(T.FontStyle,v,T.FontStyle.NORMAL);break;case"fontVariant":this.font||(this.font=new T.Font),this.font.variant=g.EnumUtils.fromString(T.FontVariant,v,T.FontVariant.NORMAL);break;case"fontSize":S=parseFloat(v);isNaN(S)?console.warn("invalid "+p+" value: "+v):(this.font||(this.font=new T.Font),this.font.size=S);break;case"lineHeight":this.lineHeight=b.LineHeight.of(v);break;case"textAlign":this.textAlign=g.EnumUtils.fromStringOrUndefined(r,v);break;case"verticalAlign":this.verticalAlign=g.EnumUtils.fromStringOrUndefined(o,v);break;case"borderRadius":var L=t.parseBorderRadius(v);L&&(this.borderTopLeftRadius=L[0],this.borderTopRightRadius=L[1],this.borderBottomRightRadius=L[2],this.borderBottomLeftRadius=L[3]);break;case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":this[p]=w.BorderRadius.of(v);break;case"border":this.borderTop=this.borderRight=this.borderLeft=this.borderBottom=E.Border.of(v);break;case"borderTop":case"borderRight":case"borderLeft":case"borderBottom":case"textBorder":this[p]=E.Border.of(v);break;case"overflow":this.overflow=g.EnumUtils.fromString(h,v,h.VISIBLE);break;case"compositeOperation":this.compositeOperation=v;break;case"filter":this.filter=v;break;case"shadow":case"textShadow":this[p]=R.Shadow.of(v);break;case"textBorderPosition":this.textBorderPosition=g.EnumUtils.fromString(u,v,u.OUTER);break;case"pointerEvents":this.pointerEvents=g.EnumUtils.fromString(c,v,c.AUTO);break;case"cursor":this.cursor=v;break;default:console.warn("unknown style:"+i+" value:"+v)}}return this},t.prototype.getSnapshotForAnimation=function(t,e){var i={};for(var n in e)this.fillSnapshotForAnimation(t,n,e[n],i);return i},t.prototype.applyAnimationResult=function(t){for(var e in t)"backgroundColor"===e?(this.background||(this.background=new m.Background),this.background.color=t[e]):this[e]=t[e]},t.prototype.clone=function(){var e=new t;return e.width=this.width,e.minWidth=this.minWidth,e.maxWidth=this.maxWidth,e.height=this.height,e.minHeight=this.minHeight,e.maxHeight=this.maxHeight,e.position=this.position,e.display=this.display,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,this.paddingTop&&(e.paddingTop=this.paddingTop.clone()),this.paddingRight&&(e.paddingRight=this.paddingRight.clone()),this.paddingBottom&&(e.paddingBottom=this.paddingBottom.clone()),this.paddingLeft&&(e.paddingLeft=this.paddingLeft.clone()),this.marginTop&&(e.marginTop=this.marginTop.clone()),this.marginRight&&(e.marginRight=this.marginRight.clone()),this.marginBottom&&(e.marginBottom=this.marginBottom.clone()),this.marginLeft&&(e.marginLeft=this.marginLeft.clone()),e.perspectiveOriginX=this.perspectiveOriginX,e.perspectiveOriginY=this.perspectiveOriginY,e.transformX=this.transformX,e.transformY=this.transformY,e.alpha=this.alpha,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,this.shadow&&(e.shadow=this.shadow.clone()),this.textShadow&&(e.textShadow=this.textShadow.clone()),e.textBorderPosition=this.textBorderPosition,this.textBorder&&(e.textBorder=this.textBorder.clone()),e.visibility=this.visibility,this.background&&(e.background=this.background.clone()),e.boxSizing=this.boxSizing,e.color=this.color.clone(),this.font&&(e.font=this.font.clone()),e.lineHeight=this.lineHeight,e.textAlign=this.textAlign,e.verticalAlign=this.verticalAlign,this.borderTop&&(e.borderTop=this.borderTop.clone()),this.borderRight&&(e.borderRight=this.borderRight.clone()),this.borderBottom&&(e.borderBottom=this.borderBottom.clone()),this.borderLeft&&(e.borderLeft=this.borderLeft.clone()),this.borderTopLeftRadius&&(e.borderTopLeftRadius=this.borderTopLeftRadius.clone()),this.borderTopRightRadius&&(e.borderTopRightRadius=this.borderTopRightRadius.clone()),this.borderBottomRightRadius&&(e.borderBottomRightRadius=this.borderBottomRightRadius.clone()),this.borderBottomLeftRadius&&(e.borderBottomLeftRadius=this.borderBottomLeftRadius.clone()),e.overflow=this.overflow,e.compositeOperation=this.compositeOperation,e.aspectRatio=this.aspectRatio,e.filter=this.filter,e.cursor=this.cursor,e.pointerEvents=this.pointerEvents,e},t.prototype.fillSnapshotForAnimation=function(e,i,n,r){var o=this.normalize(i);switch(o){case"scaleX":case"scaleY":case"alpha":case"rotation":case"skewX":case"skewY":case"aspectRatio":var s=NaN;if("number"==typeof n?s=n:"string"==typeof n&&(s=parseFloat(n)),isNaN(s)){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this[o],to:s,type:p.AnimationValueType.NUMBER};break;case"paddingRight":case"paddingLeft":case"marginRight":case"marginLeft":case"transformX":case"width":case"minWidth":case"maxWidth":case"left":case"right":case"perspectiveOriginX":var a=this[o]||d.BaseValue.of(0);(h=t.calculateAnimationBaseValue(o,a,n,e.getWidth()))&&(r[o]=h);break;case"paddingTop":case"paddingBottom":case"marginTop":case"marginBottom":case"transformY":case"height":case"minHeight":case"maxHeight":case"top":case"bottom":case"perspectiveOriginY":var h;a=this[o]||d.BaseValue.of(0);(h=t.calculateAnimationBaseValue(o,a,n,e.getHeight()))&&(r[o]=h);break;case"color":var u=void 0;if("string"==typeof n?u=f.Color.of(n):n instanceof f.Color&&(u=n),!u){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this[o],to:u,type:p.AnimationValueType.ANIMATABLE};break;case"backgroundColor":u=void 0;if("string"==typeof n?u=f.Color.of(n):n instanceof f.Color&&(u=n),!u){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this.background&&this.background.color||f.Color.WHITE,to:u,type:p.AnimationValueType.ANIMATABLE};break;case"padding":this.fillSnapshotForAnimation(e,"paddingTop",n,r),this.fillSnapshotForAnimation(e,"paddingRight",n,r),this.fillSnapshotForAnimation(e,"paddingBottom",n,r),this.fillSnapshotForAnimation(e,"paddingLeft",n,r);break;case"margin":this.fillSnapshotForAnimation(e,"marginTop",n,r),this.fillSnapshotForAnimation(e,"marginRight",n,r),this.fillSnapshotForAnimation(e,"marginBottom",n,r),this.fillSnapshotForAnimation(e,"marginLeft",n,r);break;case"perspectiveOrigin":this.fillSnapshotForAnimation(e,"perspectiveOriginX",n,r),this.fillSnapshotForAnimation(e,"perspectiveOriginY",n,r);break;case"transform":this.fillSnapshotForAnimation(e,"transformX",n,r),this.fillSnapshotForAnimation(e,"transformY",n,r);break;case"scale":this.fillSnapshotForAnimation(e,"scaleX",n,r),this.fillSnapshotForAnimation(e,"scaleY",n,r);break;case"borderRadius":var c=t.parseBorderRadius(n);c&&(this.fillSnapshotForAnimation(e,"borderTopLeftRadius",c[0],r),this.fillSnapshotForAnimation(e,"borderTopRightRadius",c[1],r),this.fillSnapshotForAnimation(e,"borderBottomRightRadius",c[2],r),this.fillSnapshotForAnimation(e,"borderBottomLeftRadius",c[3],r));break;case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":var l=void 0;if("string"==typeof n||"number"==typeof n?l=w.BorderRadius.of(n):n instanceof w.BorderRadius&&(l=n),!l){console.warn("invalid value ("+n+") for "+o);break}a=this[o]||w.BorderRadius.of(0);var g=void 0;g=l.value1.unit===d.BaseValueUnit.PERCENTAGE?a.value1.toPercentage(e.getWidth()):a.value1.toAbsolute(e.getWidth());var v=void 0;v=l.value2.unit===d.BaseValueUnit.PERCENTAGE?a.value2.toPercentage(e.getHeight()):a.value2.toAbsolute(e.getHeight()),r[o]={from:new w.BorderRadius(g,v),to:l,type:p.AnimationValueType.ANIMATABLE};break;case"borderLeft":case"borderRight":case"borderTop":case"borderBottom":case"textBorder":var y=void 0;if("string"==typeof n?y=E.Border.of(n):n instanceof E.Border&&(y=n),!y){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this[o]||E.Border.DEFAULT,to:y,type:p.AnimationValueType.ANIMATABLE};break;case"border":this.fillSnapshotForAnimation(e,"borderLeft",n,r),this.fillSnapshotForAnimation(e,"borderRight",n,r),this.fillSnapshotForAnimation(e,"borderTop",n,r),this.fillSnapshotForAnimation(e,"borderBottom",n,r);break;case"shadow":case"textShadow":var m=void 0;if("string"==typeof n?m=R.Shadow.of(n):n instanceof R.Shadow&&(m=n),!m){console.warn("invalid value ("+n+") for "+o);break}r[o]={from:this[o]||new R.Shadow(0,0,0,f.Color.WHITE),to:m,type:p.AnimationValueType.ANIMATABLE};break;default:console.warn("unsupported animation attribute:"+i)}},t.calculateAnimationBaseValue=function(t,e,i,n){var r;if("number"==typeof i||"string"==typeof i?r=d.BaseValue.of(i):i instanceof d.BaseValue&&(r=i),r)return r.unit===d.BaseValueUnit.PERCENTAGE?{from:e.toPercentage(n),to:r,type:p.AnimationValueType.ANIMATABLE}:{from:e.toAbsolute(n),to:r,type:p.AnimationValueType.ANIMATABLE};console.warn("invalid value ("+i+") for "+t)},t.parseBorderRadius=function(t){if("number"==typeof t)return[e=new w.BorderRadius(d.BaseValue.of(t)),e,e,e];if(p.isIAnimatable(t))return[t,t,t,t];var e,i=t.toString().split("/");if(1===i.length){if(e=y.StyleUtils.parse4Dirs(i[0]))return[new w.BorderRadius(e[0]),new w.BorderRadius(e[1]),new w.BorderRadius(e[2]),new w.BorderRadius(e[3])]}else if(2===i.length){var n=y.StyleUtils.parse4Dirs(i[0]),r=y.StyleUtils.parse4Dirs(i[1]);if(n&&r)return[new w.BorderRadius(n[0],r[0]),new w.BorderRadius(n[1],r[1]),new w.BorderRadius(n[2],r[2]),new w.BorderRadius(n[3],r[3])]}console.warn("invalid border radius:"+t)},t.prototype.normalize=function(t){for(var e="",i=0,n=t.split(/-/);i<n.length;i++){var r=n[i];""===e?e=r:e+=r.substring(0,1).toUpperCase()+r.substring(1)}return e},t}();e.Style=O},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.bubbles=!1,this.cancelable=!1,this.type=t,this.bubbles=e,this.cancelable=i,this.timeStamp=Date.now()}return t.prototype.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t}();e.Event=n;var r=function(){function t(){this.listeners={}}return t.prototype.addEventListener=function(t,e){for(var i=0,n="string"==typeof t?[t]:t;i<n.length;i++){var r=n[i],o=this.listeners[r];o&&this.removeEventListener(r,e),(o=this.listeners[r])?o.push(e):this.listeners[r]=[e]}return this},t.prototype.on=function(t,e){return this.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){for(var i=0,n="string"==typeof t?[t]:t;i<n.length;i++){var r=n[i],o=this.listeners[r];if(!o)return;for(var s=0,a=o.length;s<a;s++)if(o[s]===e){1===a?delete this.listeners[r]:o.splice(s,1);break}}return this},t.prototype.off=function(t,e){this.removeEventListener(t,e)},t.prototype.removeAllEventListeners=function(t){t?this.listeners&&delete this.listeners[t]:this.listeners={}},t.prototype.hasEventListener=function(t){return!!this.listeners[t]},t.prototype.willTrigger=function(t){return this.hasEventListener(t)},t.prototype.dispatchEvent=function(t){var e=this.listeners[t.type];if(e){e=e.slice();for(var i=0;i<e.length&&!t.immediatePropagationStopped;i++)e[i](t)}return!t.defaultPrevented},t}();e.EventDispatcher=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.positions=[]}return t.prototype.trim=function(t){for(;this.positions.length>0&&this.positions[0].timestamp<t-100;)this.positions.shift()},t.prototype.add=function(t,e,i){this.trim(i),this.positions.push({x:t,y:e,timestamp:i});var n=0,r=0;if(this.positions.length>1){var o=this.positions[0],s=i-o.timestamp;if(s>0){var a=Math.sqrt(Math.pow(t-o.x,2)+Math.pow(e-o.y,2));a>0&&(r=a/s,n=Math.asin((o.y-e)/a)/Math.PI*180,t<o.x?n=180-n:n<0&&(n=360+n))}}return{speed:r,direction:n}},t}(),r=function(){function t(t,e,i,n,r){this.pressed=!1,this.x=0,this.y=0,this.identifier=t,this.srcElement=e,this.srcStageX=this.stageX=i,this.srcStageY=this.stageY=n,this.srcTimestamp=this.timestamp=r,this.speed=this.direction=0}return t.prototype.getDelta=function(){if(void 0!==this.deltaX&&void 0!==this.deltaY)return{x:this.deltaX,y:this.deltaY};if(!this.velocityTracker||this.velocityTracker.positions.length<=1)return{x:0,y:0};var t=this.velocityTracker.positions.length;return{x:this.velocityTracker.positions[t-1].x-this.velocityTracker.positions[t-2].x,y:this.velocityTracker.positions[t-1].y-this.velocityTracker.positions[t-2].y}},t.prototype.switchSourceElement=function(e){var i=new t(this.identifier,e,this.srcStageX,this.srcStageY,this.srcTimestamp);return i.x=this.x,i.y=this.y,i.currentTarget=this.currentTarget,i.pressed=this.pressed,i.speed=this.speed,i.direction=this.direction,i},t.prototype.onUpdate=function(t){this.velocityTracker||(this.velocityTracker=new n,this.velocityTracker.add(this.stageX,this.stageY,this.timestamp));var e=this.velocityTracker.add(t.stageX,t.stageY,t.timestamp);this.speed=e.speed,this.direction=e.direction,this.stageX=t.stageX,this.stageY=t.stageY,this.timestamp=t.srcTimestamp},t.prototype.clone=function(){return this.switchSourceElement(this.srcElement)},t}();e.TouchItem=r},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PX=1]="PX",t[t.PERCENTAGE=2]="PERCENTAGE"}(n=e.BaseValueUnit||(e.BaseValueUnit={}));var r=function(){function t(t,e){void 0===e&&(e=n.PX),this.numberValue=0,this.unit=e,this.numberValue=t}return t.of=function(e,i){if(void 0===i&&(i=!1),"string"==typeof e){var r=parseFloat(e);return isNaN(r)?void(i||console.warn("invalid value:"+e)):e.endsWith("%")?new t(r,n.PERCENTAGE):new t(r,n.PX)}return new t(e,n.PX)},t.prototype.getValue=function(t){switch(this.unit){case n.PERCENTAGE:return this.numberValue*t/100;case n.PX:return this.numberValue}},t.prototype.toAbsolute=function(e){switch(this.unit){case n.PERCENTAGE:return new t(this.numberValue*e/100,n.PX);case n.PX:return this}},t.prototype.toPercentage=function(e){switch(this.unit){case n.PX:return new t(this.numberValue/e*100,n.PERCENTAGE);case n.PERCENTAGE:return this}},t.prototype.toString=function(){switch(this.unit){case n.PERCENTAGE:return this.numberValue+"%";case n.PX:return this.numberValue+""}},t.prototype.equals=function(t){return this.numberValue===t.numberValue&&this.unit==this.unit},t.prototype.clone=function(){return new t(this.numberValue,this.unit)},t.prototype.update=function(e,i){return new t(this.numberValue+(e.numberValue-this.numberValue)*i,e.unit)},t.prototype.convertFrom=function(e){var i=t.of(e);return void 0===i?new t(0):i},t.prototype.isAnimatable=function(){return!0},t.ZERO=t.of("0"),t}();e.BaseValue=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(15),r=/^([0-9]+|[0-9]+\.[0-9]*|[0-9]*\.[0-9]+)%?$/,o=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,s=function(){function t(t,e,i,n){void 0===n&&(n=1),this.r=0,this.g=0,this.b=0,this.a=1,this.r=Math.min(255,Math.max(0,t)),this.g=Math.min(255,Math.max(0,e)),this.b=Math.min(255,Math.max(0,i)),this.a=Math.min(1,Math.max(0,n))}return t.of=function(e,i){if(void 0===i&&(i=!1),o.test(e))return this.fromHex(e,i);var r=e.toUpperCase();if(this[r])return this[r];var s=n.FunctionParser.parse(e,i);if(s){var a=s.name.toLowerCase();if("rgb"===a&&3===s.arguments.length){var h=this.parseColorValue(s.arguments[0],255),u=this.parseColorValue(s.arguments[1],255),c=this.parseColorValue(s.arguments[2],255);return void 0===h||void 0===u||void 0===c?void console.warn("invalid color value:"+e):new t(h,u,c,1)}if("rgba"===a&&4===s.arguments.length){h=this.parseColorValue(s.arguments[0],255),u=this.parseColorValue(s.arguments[1],255),c=this.parseColorValue(s.arguments[2],255);var l=this.parseColorValue(s.arguments[3],1);return void 0===h||void 0===u||void 0===c||void 0===l?void console.warn("invalid color value:"+e):new t(h,u,c,l)}i||console.warn("invalid color value:"+e)}else i||console.warn("invalid color value:"+e)},t.random=function(e){return new t(255*Math.random(),255*Math.random(),255*Math.random(),e?1*Math.random():1)},t.parseColorValue=function(t,e){if(r.test(t))return t.endsWith("%")?parseFloat(t)*e/100:parseFloat(t)},t.fromHex=function(e,i){return 4===e.length?new t(16*parseInt(e[1],16)+parseInt(e[1],16),16*parseInt(e[2],16)+parseInt(e[2],16),16*parseInt(e[3],16)+parseInt(e[3],16),1):5===e.length?new t(16*parseInt(e[1],16)+parseInt(e[1],16),16*parseInt(e[2],16)+parseInt(e[2],16),16*parseInt(e[3],16)+parseInt(e[3],16),(16*parseInt(e[4],16)+parseInt(e[4],16))/255):7===e.length?new t(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16),1):9===e.length?new t(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16),parseInt(e.substring(7,9),16)/255):void(i||console.warn("invalid color value:"+e))},t.prototype.equals=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.toString=function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"},t.prototype.update=function(e,i){return new t(this.r+(e.r-this.r)*i,this.g+(e.g-this.g)*i,this.b+(e.b-this.b)*i,this.a+(e.a-this.a)*i)},t.prototype.convertFrom=function(e){var i=t.of(e+"");return void 0===i?t.BLACK:i},t.prototype.isAnimatable=function(){return!0},t.TRANSPARENT=t.of("#0000"),t.ALICEBLUE=t.of("#F0F8FF"),t.ANTIQUEWHITE=t.of("#FAEBD7"),t.AQUA=t.of("#00FFFF"),t.AQUAMARINE=t.of("#7FFFD4"),t.AZURE=t.of("#F0FFFF"),t.BEIGE=t.of("#F5F5DC"),t.BISQUE=t.of("#FFE4C4"),t.BLACK=t.of("#000000"),t.BLANCHEDALMOND=t.of("#FFEBCD"),t.BLUE=t.of("#0000FF"),t.BLUEVIOLET=t.of("#8A2BE2"),t.BROWN=t.of("#A52A2A"),t.BURLYWOOD=t.of("#DEB887"),t.CADETBLUE=t.of("#5F9EA0"),t.CHARTREUSE=t.of("#7FFF00"),t.CHOCOLATE=t.of("#D2691E"),t.CORAL=t.of("#FF7F50"),t.CORNFLOWERBLUE=t.of("#6495ED"),t.CORNSILK=t.of("#FFF8DC"),t.CRIMSON=t.of("#DC143C"),t.CYAN=t.of("#00FFFF"),t.DARKBLUE=t.of("#00008B"),t.DARKCYAN=t.of("#008B8B"),t.DARKGOLDENROD=t.of("#B8860B"),t.DARKGRAY=t.of("#A9A9A9"),t.DARKGREY=t.of("#A9A9A9"),t.DARKGREEN=t.of("#006400"),t.DARKKHAKI=t.of("#BDB76B"),t.DARKMAGENTA=t.of("#8B008B"),t.DARKOLIVEGREEN=t.of("#556B2F"),t.DARKORANGE=t.of("#FF8C00"),t.DARKORCHID=t.of("#9932CC"),t.DARKRED=t.of("#8B0000"),t.DARKSALMON=t.of("#E9967A"),t.DARKSEAGREEN=t.of("#8FBC8F"),t.DARKSLATEBLUE=t.of("#483D8B"),t.DARKSLATEGRAY=t.of("#2F4F4F"),t.DARKSLATEGREY=t.of("#2F4F4F"),t.DARKTURQUOISE=t.of("#00CED1"),t.DARKVIOLET=t.of("#9400D3"),t.DEEPPINK=t.of("#FF1493"),t.DEEPSKYBLUE=t.of("#00BFFF"),t.DIMGRAY=t.of("#696969"),t.DIMGREY=t.of("#696969"),t.DODGERBLUE=t.of("#1E90FF"),t.FIREBRICK=t.of("#B22222"),t.FLORALWHITE=t.of("#FFFAF0"),t.FORESTGREEN=t.of("#228B22"),t.FUCHSIA=t.of("#FF00FF"),t.GAINSBORO=t.of("#DCDCDC"),t.GHOSTWHITE=t.of("#F8F8FF"),t.GOLD=t.of("#FFD700"),t.GOLDENROD=t.of("#DAA520"),t.GRAY=t.of("#808080"),t.GREY=t.of("#808080"),t.GREEN=t.of("#008000"),t.GREENYELLOW=t.of("#ADFF2F"),t.HONEYDEW=t.of("#F0FFF0"),t.HOTPINK=t.of("#FF69B4"),t.INDIANRED=t.of("#CD5C5C"),t.INDIGO=t.of("#4B0082"),t.IVORY=t.of("#FFFFF0"),t.KHAKI=t.of("#F0E68C"),t.LAVENDER=t.of("#E6E6FA"),t.LAVENDERBLUSH=t.of("#FFF0F5"),t.LAWNGREEN=t.of("#7CFC00"),t.LEMONCHIFFON=t.of("#FFFACD"),t.LIGHTBLUE=t.of("#ADD8E6"),t.LIGHTCORAL=t.of("#F08080"),t.LIGHTCYAN=t.of("#E0FFFF"),t.LIGHTGOLDENRODYELLOW=t.of("#FAFAD2"),t.LIGHTGRAY=t.of("#D3D3D3"),t.LIGHTGREY=t.of("#D3D3D3"),t.LIGHTGREEN=t.of("#90EE90"),t.LIGHTPINK=t.of("#FFB6C1"),t.LIGHTSALMON=t.of("#FFA07A"),t.LIGHTSEAGREEN=t.of("#20B2AA"),t.LIGHTSKYBLUE=t.of("#87CEFA"),t.LIGHTSLATEGRAY=t.of("#778899"),t.LIGHTSLATEGREY=t.of("#778899"),t.LIGHTSTEELBLUE=t.of("#B0C4DE"),t.LIGHTYELLOW=t.of("#FFFFE0"),t.LIME=t.of("#00FF00"),t.LIMEGREEN=t.of("#32CD32"),t.LINEN=t.of("#FAF0E6"),t.MAGENTA=t.of("#FF00FF"),t.MAROON=t.of("#800000"),t.MEDIUMAQUAMARINE=t.of("#66CDAA"),t.MEDIUMBLUE=t.of("#0000CD"),t.MEDIUMORCHID=t.of("#BA55D3"),t.MEDIUMPURPLE=t.of("#9370DB"),t.MEDIUMSEAGREEN=t.of("#3CB371"),t.MEDIUMSLATEBLUE=t.of("#7B68EE"),t.MEDIUMSPRINGGREEN=t.of("#00FA9A"),t.MEDIUMTURQUOISE=t.of("#48D1CC"),t.MEDIUMVIOLETRED=t.of("#C71585"),t.MIDNIGHTBLUE=t.of("#191970"),t.MINTCREAM=t.of("#F5FFFA"),t.MISTYROSE=t.of("#FFE4E1"),t.MOCCASIN=t.of("#FFE4B5"),t.NAVAJOWHITE=t.of("#FFDEAD"),t.NAVY=t.of("#000080"),t.OLDLACE=t.of("#FDF5E6"),t.OLIVE=t.of("#808000"),t.OLIVEDRAB=t.of("#6B8E23"),t.ORANGE=t.of("#FFA500"),t.ORANGERED=t.of("#FF4500"),t.ORCHID=t.of("#DA70D6"),t.PALEGOLDENROD=t.of("#EEE8AA"),t.PALEGREEN=t.of("#98FB98"),t.PALETURQUOISE=t.of("#AFEEEE"),t.PALEVIOLETRED=t.of("#DB7093"),t.PAPAYAWHIP=t.of("#FFEFD5"),t.PEACHPUFF=t.of("#FFDAB9"),t.PERU=t.of("#CD853F"),t.PINK=t.of("#FFC0CB"),t.PLUM=t.of("#DDA0DD"),t.POWDERBLUE=t.of("#B0E0E6"),t.PURPLE=t.of("#800080"),t.REBECCAPURPLE=t.of("#663399"),t.RED=t.of("#FF0000"),t.ROSYBROWN=t.of("#BC8F8F"),t.ROYALBLUE=t.of("#4169E1"),t.SADDLEBROWN=t.of("#8B4513"),t.SALMON=t.of("#FA8072"),t.SANDYBROWN=t.of("#F4A460"),t.SEAGREEN=t.of("#2E8B57"),t.SEASHELL=t.of("#FFF5EE"),t.SIENNA=t.of("#A0522D"),t.SILVER=t.of("#C0C0C0"),t.SKYBLUE=t.of("#87CEEB"),t.SLATEBLUE=t.of("#6A5ACD"),t.SLATEGRAY=t.of("#708090"),t.SLATEGREY=t.of("#708090"),t.SNOW=t.of("#FFFAFA"),t.SPRINGGREEN=t.of("#00FF7F"),t.STEELBLUE=t.of("#4682B4"),t.TAN=t.of("#D2B48C"),t.TEAL=t.of("#008080"),t.THISTLE=t.of("#D8BFD8"),t.TOMATO=t.of("#FF6347"),t.TURQUOISE=t.of("#40E0D0"),t.VIOLET=t.of("#EE82EE"),t.WHEAT=t.of("#F5DEB3"),t.WHITE=t.of("#FFFFFF"),t.WHITESMOKE=t.of("#F5F5F5"),t.YELLOW=t.of("#FFFF00"),t.YELLOWGREEN=t.of("#9ACD32"),t.NONE=t.of("#FFFF00"),t}();e.Color=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=i(5),o=function(){function t(){}return t.updateSize=function(t,e,i){if(t.rect.height=t.rect.width=0,t.style.width&&(t.rect.width=t.style.width.getValue(e)),t.style.minWidth&&(t.rect.width=Math.max(t.style.minWidth.getValue(e),t.rect.width)),t.style.maxWidth&&(t.rect.width=Math.min(t.style.maxWidth.getValue(e),t.rect.width)),t.style.height&&(t.rect.height=t.style.height.getValue(i)),t.style.minHeight&&(t.rect.height=Math.max(t.style.minHeight.getValue(i),t.rect.height)),t.style.maxHeight&&(t.rect.height=Math.min(t.style.maxHeight.getValue(i),t.rect.height)),void 0!==t.style.aspectRatio){var n=t.rect.height*t.style.aspectRatio;n>=t.rect.width?t.rect.width=n:t.rect.height=t.rect.width/t.style.aspectRatio}t.style.boxSizing===r.BoxSizing.CONTENT_BOX&&(t.rect.width+=(t.style.paddingLeft?t.style.paddingLeft.getValue(t.rect.width):0)+(t.style.paddingRight?t.style.paddingRight.getValue(t.rect.width):0)+(t.style.borderLeft?t.style.borderLeft.width:0)+(t.style.borderRight?t.style.borderRight.width:0),t.rect.height+=(t.style.paddingTop?t.style.paddingTop.getValue(t.rect.height):0)+(t.style.paddingBottom?t.style.paddingBottom.getValue(t.rect.height):0)+(t.style.borderTop?t.style.borderTop.width:0)+(t.style.borderBottom?t.style.borderBottom.width:0))},t.updatePositionForAbsoluteElement=function(t,e,i){t.style.right?t.rect.x=e-t.rect.width-t.style.right.getValue(e)-(t.style.marginRight?t.style.marginRight.getValue(e):0):t.style.left?t.rect.x=t.style.left.getValue(e)+(t.style.marginLeft?t.style.marginLeft.getValue(e):0):t.rect.x=t.style.marginLeft?t.style.marginLeft.getValue(e):0,t.style.bottom?t.rect.y=i-t.rect.height-t.style.bottom.getValue(i)-(t.style.marginBottom?t.style.marginBottom.getValue(i):0):t.style.top?t.rect.y=t.style.top.getValue(i)+(t.style.marginTop?t.style.marginTop.getValue(i):0):t.rect.y=t.style.marginTop?t.style.marginTop.getValue(i):0},t.measureTextWidth=function(t,e){if(0===t.length)return 0;var i=n.Runtime.get().newCanvas(),r=i.getContext("2d"),o=0;return r&&(r.save(),r.font=e.toString(),o=r.measureText(t).width,r.restore()),n.Runtime.get().releaseCanvas(i),o},t}();e.LayoutUtils=o},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(6),h=i(0),u=i(38),c=i(20);!function(t){t[t.NUMBER=1]="NUMBER",t[t.ANIMATABLE=2]="ANIMATABLE"}(o=e.AnimationValueType||(e.AnimationValueType={})),function(t){t.UPDATE="update",t.COMPLETE="complete"}(s=e.AnimateEventType||(e.AnimateEventType={}));var l=function(t){function e(e,i,n,r){var o=t.call(this,e,!1,!0)||this;return o.step=i,o.progress=n,o.value=r,o}return r(e,t),e.prototype.toString=function(){return"[AnimateEvent (type="+this.type+")]"},e}(a.Event);function p(t){return t&&t.isAnimatable&&t.isAnimatable()}function d(t){return"number"==typeof t}e.AnimateEvent=l,e.isIAnimatable=p;var f=function(){function t(t,e){this.endTime=0,this.target=t,this.duration=e}return t.prototype.onStart=function(){},t.prototype.onUpdate=function(t){},t.prototype.onEnd=function(){},t}();e.AnimationStep=f;var g,v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(f),y=function(t){function e(e,i,n,r){var o=t.call(this,e,r)||this;if("string"==typeof n){var s=c.AlgorithmFactory.get(n);if(!s)throw new Error("unknown algorithm:"+n);o.algorithm=s}else o.algorithm=n;return o.values=i,o}return r(e,t),e.prototype.onStart=function(){if(this.computed={},d(this.target))this.computed.value={type:o.NUMBER,from:this.target,to:this.values};else if(p(this.target)){var t=this.target;this.computed.value={type:o.ANIMATABLE,from:t,to:t.convertFrom(this.values)}}else{var e=this.values;for(var i in e){var n=e[i],r=this.target[i];if(p(n)){var s=n;this.computed[i]={type:o.ANIMATABLE,from:s.convertFrom(r),to:s}}else if(p(r)){var a=r;this.computed[i]={type:o.ANIMATABLE,from:a,to:a.convertFrom(n)}}else if("number"==typeof n){a=r;isNaN(a)&&(a=parseFloat(r+""),isNaN(a)&&(a=0)),this.computed[i]={type:o.NUMBER,from:a,to:n}}}}},e.prototype.onUpdate=function(t){if(!u.ContainerUtils.isEmpty(this.computed)){if(d(this.target)){var e=this.computed.value.from,i=this.computed.value.to;return this.computed.value.current=e+(i-e)*this.algorithm.calculate(t),this.computed.value.current}if(p(this.target)){e=this.computed.value.from,i=this.computed.value.to;return this.computed.value.current=e.update(i,this.algorithm.calculate(t)),this.computed.value.current}var n={},r=!1;for(var s in this.computed){var a=this.computed[s];switch(a.type){case o.NUMBER:e=a.from,i=a.to;a.current=e+(i-e)*this.algorithm.calculate(t);break;case o.ANIMATABLE:e=a.from,i=a.to;a.current=e.update(i,this.algorithm.calculate(t))}this.target[s]=a.current,n[s]=a.current,r=!0}return r?n:void 0}},e}(f),m=function(t){function e(e,i,n,r){var o=t.call(this,e,r)||this;if("string"==typeof n){var s=c.AlgorithmFactory.get(n);if(!s)throw new Error("unknown algorithm:"+n);o.algorithm=s}else o.algorithm=n;return o.values=i,o}return r(e,t),e.prototype.onStart=function(){this.computed=this.target.style.getSnapshotForAnimation(this.target,this.values)},e.prototype.onUpdate=function(t){if(!u.ContainerUtils.isEmpty(this.computed)){var e={},i=!1,n=this.target;for(var r in this.computed){var s=this.computed[r];switch(s.type){case o.NUMBER:var a=s.from,c=s.to;s.current=a+(c-a)*this.algorithm.calculate(t);break;case o.ANIMATABLE:a=s.from,c=s.to;s.current=a.update(c,this.algorithm.calculate(t))}e[r]=s.current,i=!0}return i?(n.style.applyAnimationResult(e),n.dispatchEvent(new h.XObjectEvent("update",!0,!0,n)),e):void 0}},e}(f),E=function(t){function e(e,i){var n=t.call(this,e,0)||this;return n.call=i,n}return r(e,t),e.prototype.onEnd=function(){this.call(this.target)},e}(f);!function(t){t[t.RUNNING=1]="RUNNING",t[t.PAUSED=2]="PAUSED",t[t.COMPLETED=3]="COMPLETED",t[t.CANCELLED=4]="CANCELLED"}(g=e.AnimationState||(e.AnimationState={}));var w=function(t){function e(e,i){var n=t.call(this)||this;return n.playTimes=1,n.state=g.RUNNING,n.steps=[],n.roundStartTime=0,n.duration=0,n.currentStepIndex=0,n.currentStepProgress=0,n.target=e,n.playTimes=i?0:1,n.roundStartTime=n.beginTime=Date.now(),n.currentStepIndex=0,n.state=g.RUNNING,n}return r(e,t),e.prototype.toPromise=function(){var t=this;return new Promise((function(e,i){t.addEventListener(s.COMPLETE,(function(t){e(t)}))}))},e.prototype.pause=function(){return this.state===g.RUNNING&&(this.state=g.PAUSED,this.pauseTime=Date.now(),!0)},e.prototype.resume=function(){if(this.state===g.PAUSED){var t=Date.now()-this.pauseTime;return this.roundStartTime+=t,this.beginTime+=t,this.state=g.RUNNING,!0}return!1},e.prototype.loop=function(t){return this.playTimes=t?0:1,this},e.prototype.times=function(t){return this.playTimes=t,this},e.prototype.to=function(t,e,i){return void 0===i&&(i="linear"),this.addStep(new y(this.target,t,i,e)),this},e.prototype.css=function(t,e,i){return void 0===i&&(i="linear"),this.addStep(new m(this.target,t,i,e)),this},e.prototype.call=function(t){return this.addStep(new E(this.target,t))},e.prototype.wait=function(t){return this.addStep(new v(this.target,t))},e.prototype.onInterval=function(){if(this.duration<=0)return!1;var t=Date.now();if(t<this.roundStartTime)return!1;var e=t-this.roundStartTime,i=this.steps[this.currentStepIndex];if(e>=this.duration){for(this.doUpdateInternal(1),i.onEnd(),++this.currentStepIndex;this.currentStepIndex<this.steps.length;++this.currentStepIndex){(o=this.steps[this.currentStepIndex]).onStart(),this.doUpdateInternal(1),o.onEnd()}var n=!0;if(this.playTimes>0&&(n=this.playTimes*this.duration>t-this.beginTime),n)for(e%=this.duration,this.roundStartTime=t-e,this.currentStepIndex=0;;){if((o=this.steps[this.currentStepIndex]).onStart(),o.endTime>e){var r=1-(o.endTime-e)/o.duration;this.doUpdateInternal(r);break}this.doUpdateInternal(1),o.onEnd(),++this.currentStepIndex}else this.currentStepIndex=this.steps.length-1,this.state=g.COMPLETED,this.dispatchEvent(new l(s.COMPLETE,this.currentStepIndex,this.currentStepProgress))}else if(i.endTime>e){r=1-(i.endTime-e)/i.duration;this.doUpdateInternal(r)}else for(this.doUpdateInternal(1),i.onEnd(),++this.currentStepIndex;;){var o;if((o=this.steps[this.currentStepIndex]).onStart(),o.endTime>e&&o.duration>0){r=1-(o.endTime-e)/o.duration;this.doUpdateInternal(r);break}this.doUpdateInternal(1),o.onEnd(),++this.currentStepIndex}return!0},e.prototype.cancel=function(){this.state=g.CANCELLED,this.dispatchEvent(new l(s.COMPLETE,this.currentStepIndex,this.currentStepProgress))},e.prototype.doUpdateInternal=function(t){this.currentStepProgress=t;var e=this.steps[this.currentStepIndex].onUpdate(t);e&&this.dispatchEvent(new l(s.UPDATE,this.currentStepIndex,this.currentStepProgress,e))},e.prototype.addStep=function(t){return this.steps.push(t),this.duration+=t.duration,t.endTime=this.duration,1===this.steps.length&&t.onStart(),this},e}(a.EventDispatcher);e.Animation=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isAbsolute=function(t){return t.indexOf("://")>0||t.startsWith("//")},t.getDomain=function(t){var e;if(t.startsWith("//"))e=2;else{if((e=t.indexOf("://"))<=0)return;e+=3}var i=t.indexOf(":",e);return i<0&&(i=t.indexOf("/",e)),i<0?t.substring(e):t.substring(e,i)},t.getOrigin=function(t){var e;if(t.startsWith("//"))e=2;else{if((e=t.indexOf("://"))<=0)return;e+=3}var i=t.indexOf("/",e);return i<0?t:t.substring(0,i)},t}();e.URLUtils=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.fromString=function(t,e,i){for(var n in t)if(t[n]===e)return e;return i},t.fromStringOrUndefined=function(t,e){for(var i in t)if(t[i]===e)return e},t}();e.EnumUtils=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(34),r=i(1),o=i(5),s=function(){function t(){}return t.drawElement=function(t,e){var i=t.style;i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation);var r,s=i.borderTop?i.borderTop.width:0,a=i.borderRight?i.borderRight.width:0,h=i.borderBottom?i.borderBottom.width:0,u=i.borderLeft?i.borderLeft.width:0,c=(new n.RoundRect).applySize(t.rect.width,t.rect.height).applyRadius(i.borderTopLeftRadius,i.borderTopRightRadius,i.borderBottomLeftRadius,i.borderBottomRightRadius);if(r=s>0||a>0||h>0||u>0?c.applyBorder(s,a,h,u):c,i.shadow&&i.shadow.isEnable()){e.save(),e.shadowBlur=i.shadow.blur,e.shadowColor=i.shadow.color.toString(),e.shadowOffsetX=i.shadow.offsetX,e.shadowOffsetY=i.shadow.offsetY;var l=Math.abs(i.shadow.offsetX)+i.shadow.blur,p=Math.abs(i.shadow.offsetY)+i.shadow.blur,d=new n.RoundRect(c.x1-l,c.y1-p,c.x2+l,c.y2+p);e.beginPath(),d.makePath(e,!0,!0),c.makePath(e,!1,!1),e.closePath(),e.clip(),e.fillStyle="black",e.beginPath(),c.makePath(e,!0,!0),e.closePath(),e.fill(),e.restore()}if(e.save(),t.drawBackground(e,c,r),e.restore(),s>0||a>0||h>0||u>0){var f=i.borderTop?i.borderTop.color:void 0,g=i.borderRight?i.borderRight.color:void 0,v=i.borderBottom?i.borderBottom.color:void 0,y=i.borderLeft?i.borderLeft.color:void 0,m=[];f&&m.push(f),g&&m.push(g),v&&m.push(v),y&&m.push(y);for(var E=m[0],w=!0,T=1;T<m.length;++T)E.equals(m[T])||(w=!1);w?(e.beginPath(),c.makePath(e,!0,!0),r.makePath(e,!1,!1),e.closePath(),e.fillStyle=E.toString(),e.fill()):(y&&(e.save(),e.beginPath(),e.moveTo(c.x1,c.y1),f||e.lineTo(r.x1+r.leftTopRadiusX,c.y1),e.lineTo(r.x1+r.leftTopRadiusX,r.y1+r.leftTopRadiusY),e.lineTo(r.x1+r.leftBottomRadiusX,r.y2-r.leftBottomRadiusY),v||e.lineTo(r.x1+r.leftBottomRadiusX,c.y2),e.lineTo(c.x1,c.y2),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),r.makePath(e,!1,!1),e.closePath(),e.fillStyle=y.toString(),e.fill(),e.restore()),f&&(e.save(),e.beginPath(),e.moveTo(c.x2,c.y1),g||e.lineTo(c.x2,c.y1+c.rightTopRadiusY),e.lineTo(r.x2-r.rightTopRadiusX,r.y1+r.rightTopRadiusY),e.lineTo(r.x1+r.leftTopRadiusX,r.y1+r.leftTopRadiusY),y||e.lineTo(c.x1,c.y1+c.leftTopRadiusY),e.lineTo(c.x1,c.y1),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),r.makePath(e,!1,!1),e.closePath(),e.fillStyle=f.toString(),e.fill(),e.restore()),g&&(e.save(),e.beginPath(),e.moveTo(c.x2,c.y2),v||e.lineTo(c.x2-c.rightBottomRadiusX,c.y2),e.lineTo(r.x2-r.rightBottomRadiusX,r.y2-r.rightBottomRadiusY),e.lineTo(r.x2-r.rightTopRadiusX,r.y1+r.rightTopRadiusY),f||e.lineTo(r.x2-r.rightTopRadiusX,c.y1),e.lineTo(c.x2,c.y1),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),r.makePath(e,!1,!1),e.closePath(),e.fillStyle=g.toString(),e.fill(),e.restore()),v&&(e.save(),e.beginPath(),e.moveTo(c.x1,c.y2),y||e.lineTo(c.x1,c.y2-c.leftBottomRadiusY),e.lineTo(r.x1+r.leftBottomRadiusX,r.y2-r.leftBottomRadiusY),e.lineTo(r.x2-r.rightBottomRadiusX,r.y2-r.rightBottomRadiusY),g||e.lineTo(c.x2,c.y2-c.rightBottomRadiusY),e.lineTo(c.x2,c.y2),e.closePath(),e.clip(),e.beginPath(),c.makePath(e,!0,!0),r.makePath(e,!1,!1),e.closePath(),e.fillStyle=v.toString(),e.fill(),e.restore()))}t.style.overflow===o.Overflow.HIDDEN?(e.save(),r.clip(e),t.drawContent(e),e.restore()):t.drawContent(e)},t.getFrameImage=function(t,e){return t.image?t.image:t.url?r.ResourceRegistry.DefaultInstance.get(t.url):e.image?e.image:e.url?r.ResourceRegistry.DefaultInstance.get(e.url):void 0},t.getFrameSize=function(t,e){var i={width:0,height:0};if(void 0!==e.width)i.width=e.width;else if(void 0!==t.destWidth)i.width=t.destWidth+(t.destX||0);else if(void 0!==t.srcWidth)i.width=t.srcWidth;else{(n=this.getFrameImage(t,e))&&(i.width=n.width)}if(void 0!==e.height)i.height=e.height;else if(void 0!==t.destHeight)i.height=t.destHeight+(t.destY||0);else if(void 0!==t.srcHeight)i.height=t.srcHeight;else{var n;(n=this.getFrameImage(t,e))&&(i.height=n.height)}return i},t.drawFrame=function(t,e,i,n){var r=this.getFrameImage(i,n);if(r){var o=this.getFrameSize(i,n),s=e.width/o.width,a=e.height/o.height,h=void 0!==i.destX?i.destX:0,u=void 0!==i.destY?i.destY:0,c=void 0!==i.destWidth?i.destWidth:o.width-h,l=void 0!==i.destHeight?i.destHeight:o.height-u,p=void 0!==i.srcX?i.srcX:0,d=void 0!==i.srcY?i.srcY:0,f=void 0!==i.srcWidth?i.srcWidth:c,g=void 0!==i.srcHeight?i.srcHeight:l;try{t.drawImage(r,p,d,f,g,h*s+e.x,u*a+e.y,c*s,l*a)}catch(t){return}}},t}();e.DrawUtils=s},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NAME_START=0]="NAME_START",t[t.NAME=1]="NAME",t[t.NAME_END=2]="NAME_END",t[t.PARAMETER_START=3]="PARAMETER_START",t[t.PARAMETER=4]="PARAMETER",t[t.PARAMETER_END=5]="PARAMETER_END",t[t.END=6]="END"}(n||(n={}));var r=function(){function t(){}return t.isBlank=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},t.parse=function(t,e){void 0===e&&(e=!1);for(var i={name:void 0,arguments:[]},r=n.NAME_START,o="",s=0,a=t.length,h=0;h<a;++h){var u=t[h];switch(r){case n.NAME_START:this.isBlank(u)||(s=h,r=n.NAME);break;case n.NAME:if(this.isBlank(u)||")"===u)return void(e||console.warn("invalid function:"+t));"("===u&&(i.name=t.substring(s,h),r="("===u?n.PARAMETER_START:n.NAME_END);break;case n.NAME_END:if("("===u){r=n.PARAMETER_START;break}if(!this.isBlank(u))return void(e||console.warn("invalid function:"+t));case n.PARAMETER_START:if(this.isBlank(u))break;if('"'===u||"'"===u)r=n.PARAMETER,s=h+1,o=u;else if(")"===u)r=n.END;else{if(","===u)return void(e||console.warn("invalid function:"+t));r=n.PARAMETER,s=h,o=""}break;case n.PARAMETER:""!==o?o===u&&(r=n.PARAMETER_END,i.arguments.push(t.substring(s,h)),o=""):","===u?(r=n.PARAMETER_START,i.arguments.push(t.substring(s,h).trim()),o=""):")"===u&&(r=n.END,i.arguments.push(t.substring(s,h).trim()),o="");break;case n.PARAMETER_END:if(this.isBlank(u))break;","===u?r=n.PARAMETER_START:")"===u&&(r=n.END);break;case n.END:if(!this.isBlank(u))return void(e||console.warn("invalid function:"+t))}}if(r===n.END)return i;e||console.warn("invalid function:"+t)},t}();e.FunctionParser=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=function(){function t(){}return t.parse4Dirs=function(t){var e=t.trim().split(/\s+/);return 1===e.length?[n.BaseValue.of(e[0]),n.BaseValue.of(e[0]),n.BaseValue.of(e[0]),n.BaseValue.of(e[0])]:2===e.length?[n.BaseValue.of(e[0]),n.BaseValue.of(e[1]),n.BaseValue.of(e[0]),n.BaseValue.of(e[1])]:3===e.length?[n.BaseValue.of(e[0]),n.BaseValue.of(e[1]),n.BaseValue.of(e[2]),n.BaseValue.of(e[1])]:4===e.length?[n.BaseValue.of(e[0]),n.BaseValue.of(e[1]),n.BaseValue.of(e[2]),n.BaseValue.of(e[3])]:void 0},t}();e.StyleUtils=r},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.START=0]="START",t[t.VALUE=1]="VALUE",t[t.FUNC=2]="FUNC"}(n||(n={}));var r=function(){function t(t){void 0===t&&(t=""),this.stopLetters="",this.stopLetters=t}return t.prototype.isSplitter=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},t.prototype.isStopLetter=function(t){return this.stopLetters&&this.stopLetters.indexOf(t)>=0},t.prototype.tokenize=function(t){for(var e=t.length,i=[],r=n.START,o="",s=0,a=0;a<e;++a){var h=t[a];switch(r){case n.START:this.isStopLetter(h)?i.push(h):this.isSplitter(h)||(s=a,r=n.VALUE,o="'"===h||'"'===h?h:"");break;case n.VALUE:""!==o?h===o&&(r=n.START,i.push(t.substring(s+1,a))):"("===h?r=n.FUNC:this.isSplitter(h)?(r=n.START,i.push(t.substring(s,a))):this.isStopLetter(h)&&(r=n.START,i.push(t.substring(s,a)),i.push(h));break;case n.FUNC:")"===h&&(r=n.START,i.push(t.substring(s,a+1)))}}return r!==n.START&&(""===o?i.push(t.substring(s)):i.push(t.substring(s+1))),i},t}();e.CSSTokenizer=r},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NORMAL=0]="NORMAL",t[t.NUMBER=1]="NUMBER",t[t.LENGTH=2]="LENGTH",t[t.PERCENT=3]="PERCENT"}(n=e.LineHeightType||(e.LineHeightType={}));var r=/^([0-9]*\.?[0-9]*)$/,o=/^([0-9]*\.?[0-9]*)px$/i,s=/^([0-9]*\.?[0-9]*)%$/,a=function(){function t(t,e){this.type=n.NORMAL,this.value=0,this.type=t,this.value=e}return t.of=function(e,i){return void 0===i&&(i=!1),"normal"===(e=e.toLowerCase())?new t(n.NORMAL,0):r.test(e)?new t(n.NUMBER,parseFloat(e)):o.test(e)?new t(n.LENGTH,parseFloat(e)):s.test(e)?new t(n.PERCENT,parseFloat(e)):void(i||console.warn("invalid line height:"+e))},t.prototype.getValue=function(t){switch(this.type){case n.NORMAL:return 1.2*t;case n.NUMBER:return t*this.value;case n.LENGTH:return this.value;case n.PERCENT:return this.value*t/100}},t.prototype.toString=function(){switch(this.type){case n.NORMAL:return"normal";case n.NUMBER:return this.value;case n.LENGTH:return this.value+"px";case n.PERCENT:return this.value+"%"}},t.prototype.clone=function(){return new t(this.type,this.value)},t}();e.LineHeight=a},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),s=i(5),a=i(10),h=i(0),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return r(e,t),e.prototype.findById=function(t){if(this.id===t)return this;for(var i=0,n=this.children;i<n.length;i++){var r=n[i];if(r.id===t)return r;if(r instanceof e){var o=r.findById(t);if(o)return o}}},e.prototype.drawContent=function(t){for(var e=0,i=this.children.slice();e<i.length;e++){var n=i[e];n.isVisible()&&(t.save(),n.updateContext(t),n.draw(t),t.restore())}},e.prototype.addChild=function(t){var e=t.parent;if(e===this){if(this.children.length>0&&this.children[this.children.length-1]===t)return this;var i=this.children.indexOf(t);return this.children.splice(i,1),this.children.push(t),t.dispatchEvent(new h.XObjectEvent("moved",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),this}return e&&e.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent(new h.XObjectEvent("added",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!1,!0,this)),this},e.prototype.addChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){var r=n[i];this.addChild(r)}return this},e.prototype.addChildAt=function(t,e){var i=t.parent;if(i===this){if(this.children[e]===t)return this;var n=this.children.indexOf(t);return n>e?(this.children.splice(n,1),this.children.splice(e,0,t)):(this.children.splice(e,0,t),this.children.splice(n,1)),t.dispatchEvent(new h.XObjectEvent("moved",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!0,!0,this)),this}return i&&i.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent(new h.XObjectEvent("added",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!0,!0,this)),this},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);return e<0?void 0:(this.children.splice(e,1),t.parent=void 0,t.dispatchEvent(new h.XObjectEvent("removed",!1,!0,t)),this.dispatchEvent(new h.XObjectEvent("update",!0,!0,this)),t)},e.prototype.removeChildAt=function(t){if(t<0||t>=this.children.length)return null;var e=this.children[t];return this.children.splice(t,1),e.dispatchEvent(new h.XObjectEvent("removed",!1,!0,e)),this.dispatchEvent(new h.XObjectEvent("update",!0,!0,this)),e},e.prototype.removeAllChildren=function(){if(0===this.children.length)return this;for(var t=0,e=this.children;t<e.length;t++){var i=e[t];i.dispatchEvent(new h.XObjectEvent("removed",!1,!0,i))}return this.children.length=0,this.dispatchEvent(new h.XObjectEvent("update",!0,!0,this)),this},e.prototype.getChildAt=function(t){return this.children[t]},e.prototype.sortChildren=function(t){return this.children.sort(t),this.dispatchEvent(new h.XObjectEvent("update",!0,!0,this)),this},e.prototype.getChildIndex=function(t){return this.children.indexOf(t)},e.prototype.swapChildrenAt=function(t,e){if(t<0||t>=this.children.length)throw new Error("invalid index:"+t);if(e<0||e>=this.children.length)throw new Error("invalid index:"+e);if(t===e)return this;var i=this.children[t],n=this.children[e];return this.children[t]=n,this.children[e]=i,i.dispatchEvent(new h.XObjectEvent("moved",!1,!0,i)),n.dispatchEvent(new h.XObjectEvent("moved",!1,!0,n)),this.dispatchEvent(new h.XObjectEvent("update",!0,!0,this)),this},e.prototype.swapChildren=function(t,e){return this.swapChildrenAt(this.getChildIndex(t),this.getChildIndex(e))},e.prototype.layout=function(){this.calculateSize(),this.layoutChildren()},e.prototype.layoutChildren=function(){for(var t=[],e=[],i=this.getContentRect(),n=i.width,r=i.height,o=0,h=this.children;o<h.length;o++){(f=h[o]).isVisible()&&(f.layout(),f.style.position===s.Position.ABSOLUTE||f.style.position===s.Position.FIXED?t.push(f):(e.push(f),n=Math.max(n,f.getOuterWidth()),r=Math.max(r,f.getOuterHeight())))}for(var u=this.getLineHeight(),c=[],l={width:0,height:u,children:[]},p=0,d=e;p<d.length;p++){var f=d[p];(l.children.length>0&&f.style.display===s.Display.BLOCK||l.width+f.getOuterWidth()>n)&&(c.push(l),l={width:0,height:u,children:[]}),l.children.push(f),l.width+=f.getOuterWidth(),l.height=Math.max(f.getOuterHeight(),l.height)}l.children.length>0&&c.push(l);for(var g=i.x,v=i.y,y=0,m=c;y<m.length;y++){var E=m[y];switch(this.style.textAlign){case s.TextAlign.RIGHT:g=i.x+n-E.width;break;case s.TextAlign.CENTER:g=i.x+(n-E.width)/2;break;default:g=i.x}for(var w=0,T=E.children;w<T.length;w++){switch((f=T[w]).rect.x=g+(f.style.marginLeft?f.style.marginLeft.getValue(this.rect.width):0),g+=f.getOuterWidth(),f.style.verticalAlign){case s.VerticalAlign.BOTTOM:f.rect.y=v+E.height-(f.style.marginBottom?f.style.marginBottom.getValue(this.rect.height):0)-f.getHeight();break;case s.VerticalAlign.MIDDLE:f.rect.y=v+(E.height-f.getOuterHeight())/2+(f.style.marginTop?f.style.marginTop.getValue(this.rect.height):0);break;default:f.rect.y=v+(f.style.marginTop?f.style.marginTop.getValue(this.rect.height):0)}}v+=E.height}if(r=Math.max(r,v-i.y),!this.style.width&&n>i.width&&(this.rect.width+=n-i.width),!this.style.height&&r>i.height&&(this.rect.height+=r-i.height),this.parent){var b=this.parent.getContentWidth(),R=this.parent.getContentWidth();if(this.style.minWidth){var A=this.style.minWidth.getValue(b),O=this.getContentWidth();this.style.boxSizing===s.BoxSizing.BORDER_BOX&&(A-=this.rect.width-O),O<A&&(this.rect.width+=A-O)}if(this.style.maxWidth){var B=this.style.maxWidth.getValue(b);O=this.getContentWidth();this.style.boxSizing===s.BoxSizing.BORDER_BOX&&(B-=this.rect.width-O),O>B&&(this.rect.width-=O-B)}if(this.style.minHeight){var S=this.style.minHeight.getValue(R),x=this.getContentHeight();this.style.boxSizing===s.BoxSizing.BORDER_BOX&&(S-=this.rect.height-x),x<S&&(this.rect.width+=S-x)}if(this.style.maxHeight){var L=this.style.maxHeight.getValue(R);x=this.getContentHeight();this.style.boxSizing===s.BoxSizing.BORDER_BOX&&(L-=this.rect.height-x),x>L&&(this.rect.width-=L-x)}}for(var I=0,C=t;I<C.length;I++){f=C[I];a.LayoutUtils.updatePositionForAbsoluteElement(f,this.rect.width,this.rect.height)}},e.prototype.getObjectUnderPoint=function(t,i,n){if(this.isVisible()){if(n){switch(this.style.pointerEvents){case s.PointerEvents.NONE:return;case s.PointerEvents.BLOCK:return this.hitTest(t,i)?this:void 0}for(var r=(a=this.children).length-1;r>=0;r--){if((h=a[r]).isVisible()){var o=this.localToLocal(t,i,h);if(h instanceof e){if(u=h.getObjectUnderPoint(o.x,o.y,n))return u}else if(h.style.pointerEvents!==s.PointerEvents.NONE&&h.style.pointerEvents!==s.PointerEvents.CROSS&&h.hitTest(o.x,o.y))return h}}return this.style.pointerEvents!==s.PointerEvents.CROSS&&this.hitTest(t,i)?this:void 0}var a;for(r=(a=this.children).length-1;r>=0;r--){var h;if((h=a[r]).isVisible()){var u;o=this.localToLocal(t,i,h);if(h instanceof e){if(u=h.getObjectUnderPoint(o.x,o.y,n))return u}else if(h.hitTest(o.x,o.y))return h;return this.hitTest(t,i)?this:void 0}}}},e.prototype.load=function(t,e){return void 0===e&&(e=!0),e&&this.removeAllChildren(),this.addChildren.apply(this,(new o.HtmlParser).parse(t)),this},e.prototype.toString=function(){return"[Container (id="+this.id+")]"},e}(h.IContainer);e.Container=u,o.HtmlParser.registerTag("container",u),o.HtmlParser.registerTag("div",u)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.calculate=function(t){return t},t}();e.Linear=o;var s=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return Math.pow(t,this.pow)},t}();e.PowIn=s;var a=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return 1-Math.pow(1-t,this.pow)},t}();e.PowOut=a;var h=function(){function t(t){this.pow=t}return t.prototype.calculate=function(t){return(t*=2)<1?.5*Math.pow(t,this.pow):1-.5*Math.abs(Math.pow(2-t,this.pow))},t}();e.PowInOut=h;var u=function(){function t(){}return t.prototype.calculate=function(t){return 1-Math.cos(t*Math.PI/2)},t}();e.SineIn=u;var c=function(){function t(){}return t.prototype.calculate=function(t){return Math.sin(t*Math.PI/2)},t}();e.SineOut=c;var l=function(){function t(){}return t.prototype.calculate=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t}();e.SineInOut=l;var p=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return t*t*((this.amount+1)*t-this.amount)},t}();e.BackIn=p;var d=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return--t*t*((this.amount+1)*t+this.amount)+1},t}();e.BackOut=d;var f=function(){function t(t){this.amount=t}return t.prototype.calculate=function(t){return(t*=2)<1?t*t*((this.amount+1)*t-this.amount)*.5:.5*((t-=2)*t*((this.amount+1)*t+this.amount)+2)},t}();e.BackInOut=f;var g=function(){function t(){}return t.prototype.calculate=function(t){return-(Math.sqrt(1-t*t)-1)},t}();e.CircIn=g;var v=function(){function t(){}return t.prototype.calculate=function(t){return Math.sqrt(1- --t*t)},t}();e.CircOut=v;var y=function(){function t(){}return t.prototype.calculate=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t}();e.CircInOut=y;var m=function(){function t(){}return t.prototype.calculateOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t}(),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.calculate=function(e){return t.prototype.calculateOut.call(this,e)},e}(m);e.BounceOut=E;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.calculate=function(e){return 1-t.prototype.calculateOut.call(this,1-e)},e}(m);e.BounceIn=w;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.calculate=function(e){return e<.5?.5*t.prototype.calculate.call(this,2*e):.5*t.prototype.calculateOut.call(this,2*e-1)+.5},e}(w);e.BounceInOut=T;var b=2*Math.PI,R=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/b*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return 0===t||1===t?t:-this.amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-this.s)*b/this.period)},t}();e.ElasticIn=R;var A=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/b*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return 0===t||1===t?t:this.amplitude*Math.pow(2,-10*t)*Math.sin((t-this.s)*b/this.period)+1},t}();e.ElasticOut=A;var O=function(){function t(t,e){this.amplitude=t,this.period=e,this.s=this.period/b*Math.asin(1/this.amplitude)}return t.prototype.calculate=function(t){return(t*=2)<1?this.amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-this.s)*b/this.period)*-.5:this.amplitude*Math.pow(2,-10*(t-=1))*Math.sin((t-this.s)*b/this.period)*.5+1},t}();e.ElasticInOut=O;var B=function(){function t(){}return t.register=function(t,e){this.algorithms.set(t,e)},t.registerAll=function(t){for(var e in t)this.algorithms.set(e,t[e])},t.get=function(t){return this.algorithms.get(t)},t.algorithms=new Map,t}();e.AlgorithmFactory=B,B.registerAll({linear:new o,quadIn:new s(2),quadOut:new a(2),quadInOut:new h(2),cubicIn:new s(3),cubicOut:new a(3),cubicInOut:new h(3),quartIn:new s(4),quartOut:new a(4),quartInOut:new h(4),quintIn:new s(5),quintOut:new a(5),quintInOut:new h(5),sineIn:new u,sineOut:new c,sineInOut:new l,backIn:new p(1.7),backOut:new d(1.7),backInOut:new f(1.7),circIn:new g,circOut:new v,circInOut:new y,bounceIn:new w,bounceOut:new E,bounceInOut:new T,elasticIn:new R(1,.3),elasticOut:new A(1,.3),elasticInOut:new O(1,.3)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(22),r=Math.PI/180,o=function(){function t(t,e,i,n,r,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.setValues(t,e,i,n,r,o)}return t.prototype.setValues=function(t,e,i,n,r,o){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},t.prototype.append=function(t,e,i,n,r,o){var s=this.a,a=this.b,h=this.c,u=this.d;return 1===t&&0===e&&0===i&&1===n||(this.a=s*t+h*e,this.b=a*t+u*e,this.c=s*i+h*n,this.d=a*i+u*n),this.tx=s*r+h*o+this.tx,this.ty=a*r+u*o+this.ty,this},t.prototype.prepend=function(t,e,i,n,r,o){var s=this.a,a=this.c,h=this.tx;return this.a=t*s+i*this.b,this.b=e*s+n*this.b,this.c=t*a+i*this.d,this.d=e*a+n*this.d,this.tx=t*h+i*this.ty+r,this.ty=e*h+n*this.ty+o,this},t.prototype.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.appendTransform=function(t,e,i,n,o,s,a,h,u){var c,l;if(o%360){var p=o*r;c=Math.cos(p),l=Math.sin(p)}else c=1,l=0;return s||a?(s*=r,a*=r,this.append(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,e),this.append(c*i,l*i,-l*n,c*n,0,0)):this.append(c*i,l*i,-l*n,c*n,t,e),(h||u)&&(this.tx-=h*this.a+u*this.c,this.ty-=h*this.b+u*this.d),this},t.prototype.prependTransform=function(t,e,i,n,o,s,a,h,u){var c,l;if(o%360){var p=o*r;c=Math.cos(p),l=Math.sin(p)}else c=1,l=0;return(h||u)&&(this.tx-=h,this.ty-=u),s||a?(s*=r,a*=r,this.prepend(c*i,l*i,-l*n,c*n,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,e)):this.prepend(c*i,l*i,-l*n,c*n,t,e),this},t.prototype.rotate=function(t){t*=r;var e=Math.cos(t),i=Math.sin(t),n=this.a,o=this.b;return this.a=n*e+this.c*i,this.b=o*e+this.d*i,this.c=-n*i+this.c*e,this.d=-o*i+this.d*e,this},t.prototype.skew=function(t,e){return t*=r,e*=r,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},t.prototype.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},t.prototype.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.prototype.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},t.prototype.transformPoint=function(t,e){var i=new n.Point(0,0);return i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},t.prototype.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.prototype.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t}();e.Matrix2D=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.equals=function(t){return this.x===t.x&&this.y==this.y},t.prototype.clone=function(){return new t(this.x,this.y)},t}();e.Point=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),r=function(){function t(){this.canvasCache=[]}return t.prototype.newCanvas=function(){return this.canvasCache.length>0?this.canvasCache.shift():document.createElement("canvas")},t.prototype.releaseCanvas=function(t){this.canvasCache.push(t)},t.prototype.newImage=function(){return new Image},t.prototype.loadArrayBuffer=function(t){this.loadByType(t,"arraybuffer")},t.prototype.loadText=function(t){this.loadByType(t,"text")},t.prototype.loadByType=function(t,e){var i=new XMLHttpRequest;i.responseType=e,i.open(t.method||"GET",t.url,!0),i.onload=function(){200===i.status&&t.onLoad(i.response)},i.onerror=function(e){t.onError(e)},i.onprogress=function(e){e.lengthComputable&&t.onProgress({loadedBytes:e.loaded,totalBytes:e.total})},i.send()},t.prototype.loadImage=function(t){if(t.allowOrigin){var e=new XMLHttpRequest;e.responseType="blob",e.open(t.method||"GET",t.url,!0),e.onload=function(){if(200===e.status){var i=URL.createObjectURL(e.response),n=new Image;n.src=i,n.onload=function(){URL.revokeObjectURL(i),t.onLoad(n)},n.onerror=function(e){URL.revokeObjectURL(i),t.onError(e)}}},e.onerror=function(e){t.onError(e)},e.onprogress=function(e){e.lengthComputable&&t.onProgress({loadedBytes:e.loaded,totalBytes:e.total})},e.send()}else this.loadImageByImageObject(t)},t.prototype.loadImageByImageObject=function(t){var e=new Image;e.onload=function(){t.onLoad(e)},e.onerror=function(e){t.onError(e)},e.src=t.url},t.prototype.enableEvents=function(t){var e=this;t.canvas.onpointerdown=function(e){t.canvas.setPointerCapture(e.pointerId)},t.canvas.onpointerup=function(e){t.canvas.releasePointerCapture(e.pointerId)},t.canvas.addEventListener("mousedown",(function(i){e.handleMouseEvent("mousedown",t,i)})),t.canvas.addEventListener("mousemove",(function(i){e.handleMouseEvent("mousemove",t,i)})),t.canvas.addEventListener("pressmove",(function(i){e.handleMouseEvent("mousemove",t,i)})),t.canvas.addEventListener("mouseup",(function(i){e.handleMouseEvent("mouseup",t,i)})),t.canvas.addEventListener("mouseenter",(function(i){e.handleMouseEvent("mouseenter",t,i)})),t.canvas.addEventListener("mouseleave",(function(i){e.handleMouseEvent("mouseleave",t,i)})),t.canvas.addEventListener("mousewheel",(function(i){e.handleMouseWheelEvent(t,i)})),t.canvas.addEventListener("touchstart",(function(i){e.handleTouchEvent("touchstart",t,i)})),t.canvas.addEventListener("touchend",(function(i){e.handleTouchEvent("touchend",t,i)})),t.canvas.addEventListener("touchmove",(function(i){e.handleTouchEvent("touchmove",t,i)})),t.canvas.addEventListener("touchcancel",(function(i){e.handleTouchEvent("touchcancel",t,i)}))},t.prototype.requestAnimationFrame=function(t){requestAnimationFrame(t)},t.prototype.handleMouseEvent=function(t,e,i){i.preventDefault();var r=e.canvas.width/e.canvas.clientWidth,o=e.canvas.height/e.canvas.clientHeight,s=i.offsetX*r,a=i.offsetY*o;e.handleMouseOrTouchEvent(t,[new n.TouchItem(0,e,s,a,Date.now())],i)},t.prototype.handleMouseWheelEvent=function(t,e){e.preventDefault();var i=t.canvas.width/t.canvas.clientWidth,n=t.canvas.height/t.canvas.clientHeight;t.handleMouseWheelEvent(e.offsetX*i,e.offsetY*n,e.deltaX,e.deltaY,e)},t.prototype.handleTouchEvent=function(t,e,i){i.preventDefault();for(var r=e.canvas.width/e.canvas.clientWidth,o=e.canvas.height/e.canvas.clientHeight,s=[],a=Date.now(),h=0,u=i.touches;h<u.length;h++){var c=u[h];s.push(new n.TouchItem(c.identifier,e,c.clientX*r,c.clientY*o,a))}e.handleMouseOrTouchEvent(t,s,i)},t}();e.WebpageRuntime=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),r=i(12),o=function(){function t(){this.canvasCache=[],this.systemInfo=wx.getSystemInfoSync()}return t.prototype.newCanvas=function(){return this.gameCanvas||(this.gameCanvas=wx.createCanvas()),this.canvasCache.length>0?this.canvasCache.shift():wx.createCanvas()},t.prototype.releaseCanvas=function(t){this.canvasCache.push(t)},t.prototype.newImage=function(){return wx.createImage()},t.prototype.loadText=function(t){r.URLUtils.isAbsolute(t.url)?wx.request({url:t.url,method:t.method||"GET",responseType:"text",success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}}):wx.getFileSystemManager().readFile({filePath:t.url,encoding:"utf-8",success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}})},t.prototype.loadArrayBuffer=function(t){r.URLUtils.isAbsolute(t.url)?wx.request({url:t.url,method:t.method||"GET",responseType:"arraybuffer",success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}}):wx.getFileSystemManager().readFile({filePath:t.url,success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}})},t.prototype.loadImage=function(t){var e=this;if(r.URLUtils.isAbsolute(t.url)){wx.downloadFile({url:t.url,success:function(i){if(200===i.statusCode){var n=e.newImage();n.src=i.tempFilePath,n.onload=function(){t.onLoad(n)},n.onerror=function(e){t.onError(e)}}else t.onError({msg:"download failed, code:"+i.statusCode})},fail:function(e){t.onError(e)}}).onProgressUpdate=function(e){t.onProgress({loadedBytes:e.totalBytesWritten,totalBytes:e.totalBytesExpectedToWrite})}}else{var i=this.newImage();i.src=t.url,i.onload=function(){t.onLoad(i)},i.onerror=function(e){t.onError(e)}}},t.prototype.getGameCanvas=function(){return this.gameCanvas||(this.gameCanvas=wx.createCanvas()),this.gameCanvas},t.prototype.enableEvents=function(t){var e=this;wx.onTouchStart((function(i){e.handleTouchEvent("touchstart",t,i)})),wx.onTouchMove((function(i){e.handleTouchEvent("touchmove",t,i)})),wx.onTouchEnd((function(i){e.handleTouchEvent("touchend",t,i)})),wx.onTouchCancel((function(i){e.handleTouchEvent("touchcancel",t,i)}))},t.prototype.requestAnimationFrame=function(t){requestAnimationFrame(t)},t.prototype.handleTouchEvent=function(t,e,i){for(var r=e.canvas.width/this.systemInfo.windowWidth,o=e.canvas.height/this.systemInfo.windowHeight,s=[],a=Date.now(),h=0,u=i.touches;h<u.length;h++){var c=u[h];s.push(new n.TouchItem(c.identifier,e,c.clientX*r,c.clientY*o,a))}e.handleMouseOrTouchEvent(t,s,i)},t}();e.WechatMiniGameRuntime=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),r=i(12),o=function(){function t(){this.canvasCache=[]}return t.prototype.setWxCanvas=function(t){this.wxCanvas=t},t.prototype.newCanvas=function(){return this.canvasCache.length>0?this.canvasCache.shift():wx.createOffscreenCanvas()},t.prototype.releaseCanvas=function(t){this.canvasCache.push(t)},t.prototype.newImage=function(){return this.wxCanvas.createImage()},t.prototype.loadText=function(t){r.URLUtils.isAbsolute(t.url)?wx.request({url:t.url,method:t.method||"GET",responseType:"text",success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}}):wx.getFileSystemManager().readFile({filePath:t.url,encoding:"utf-8",success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}})},t.prototype.loadArrayBuffer=function(t){r.URLUtils.isAbsolute(t.url)?wx.request({url:t.url,method:t.method||"GET",responseType:"arraybuffer",success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}}):wx.getFileSystemManager().readFile({filePath:t.url,success:function(e){t.onLoad(e.data)},fail:function(e){t.onError(e)}})},t.prototype.loadImage=function(t){var e=this;if(r.URLUtils.isAbsolute(t.url)){wx.downloadFile({url:t.url,success:function(i){if(200===i.statusCode){var n=e.newImage();n.src=i.tempFilePath,n.onload=function(){t.onLoad(n)},n.onerror=function(e){t.onError(e)}}else t.onError({msg:"download failed, code:"+i.statusCode})},fail:function(e){t.onError(e)}}).onProgressUpdate=function(e){t.onProgress({loadedBytes:e.totalBytesWritten,totalBytes:e.totalBytesExpectedToWrite})}}else{var i=this.newImage();i.src=t.url,i.onload=function(){t.onLoad(i)},i.onerror=function(e){t.onError(e)}}},t.prototype.enableEvents=function(t){},t.prototype.requestAnimationFrame=function(t){this.wxCanvas.requestAnimationFrame(t)},t.prototype.handleTouchEvent=function(t,e,i){for(var r=e.canvas.clientWidth?e.canvas.width/e.canvas.clientWidth:1,o=e.canvas.clientHeight?e.canvas.height/e.canvas.clientHeight:1,s=[],a=Date.now(),h=0,u=i.touches;h<u.length;h++){var c=u[h];s.push(new n.TouchItem(c.identifier,e,c.x*r,c.y*o,a))}e.handleMouseOrTouchEvent(t,s,i)},t}();e.WechatMiniProgramRuntime=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.matchAll=function(t,e){for(var i=[],n=new RegExp(e,e.flags.includes("g")?e.flags:e.flags+"g"),r=n.exec(t);r;)i.push(r),r=n.exec(t);return i},t}();e.StringUtils=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(8),o=i(9),s=i(4),a=i(17),h=i(15),u=i(28),c=i(1),l=i(2),p=i(13),d=i(16),f=new a.CSSTokenizer("/");!function(t){t.SCROLL="scroll"}(n=e.BackgroundAttachment||(e.BackgroundAttachment={}));var g,v=function(){function t(t){this.url=t,this.imageClip=u.ImageClip.of(t),c.ResourceRegistry.DefaultInstance.add(t,c.ResourceType.IMAGE)}return t.of=function(e){return new t(e[0])},t.prototype.draw=function(t,e,i){this.imageClip.draw(t,e,i)},t.prototype.ready=function(){return this.imageClip.ready()},t.prototype.width=function(t){return this.imageClip.getWidth()},t.prototype.height=function(t){return this.imageClip.getHeight()},t.prototype.toString=function(){return"url("+this.url+")"},t.prototype.clone=function(){return new t(this.url)},t.prototype.destroy=function(){},t}(),y=function(){function t(t){this.parameters=t}return t.of=function(e){return new t(e)},t.prototype.draw=function(t,e,i){if(0!==this.parameters.length){var n=Math.round(e.width),r=Math.round(e.height);if(this.canvas&&this.canvas.width===n&&this.canvas.height===r)return this.canvas;this.canvas||(this.canvas=l.Runtime.get().newCanvas()),this.canvas.width!==n&&(this.canvas.width=n),this.canvas.height!==r&&(this.canvas.height=r);var o=this.canvas.getContext("2d");if(o){var s,a=0;if(this.parameters[0].startsWith("to")){var h=this.parameters[0].substring(2).replace(/\s+/g,"");s="left"===h?o.createLinearGradient(n-1,0,0,0):"right"===h?o.createLinearGradient(0,0,n-1,0):"top"===h?o.createLinearGradient(0,r-1,0,0):"bottom"===h?o.createLinearGradient(0,0,0,r-1):"lefttop"===h?o.createLinearGradient(n-1,r-1,0,0):"leftbottom"===h?o.createLinearGradient(n-1,0,0,r-1):"righttop"===h?o.createLinearGradient(0,r-1,n-1,0):"rightbottom"===h?o.createLinearGradient(0,0,n-1,r-1):o.createLinearGradient(0,0,0,r-1),a++}else this.parameters[0].endsWith("deg")&&(s=o.createLinearGradient(0,0,n-1,r-1),a++);s||(s=o.createLinearGradient(0,0,0,r-1));for(var u=-1;a<this.parameters.length;++a){var c=this.parameters[a].split(/\s+/),p=c[0];if(c.length<2)if(-1===u)u=0,s.addColorStop(0,p);else{for(var d=1,f=0,g=a+1;g<this.parameters.length;++g){++f;var v=this.parameters[g].split(/\s+/);if(v.length>1){d=parseFloat(v[1])/100;break}}0===f?u=1:u+=(d-u)/(f+1),s.addColorStop(u,p)}else for(g=1;g<c.length;++g)u=parseFloat(c[g])/100,s.addColorStop(u,p)}o.fillStyle=s,o.fillRect(0,0,n,r),t.drawImage(this.canvas,0,0,n,r,e.x,e.y,e.width,e.height)}}},t.prototype.ready=function(){return!0},t.prototype.width=function(t){return t.width},t.prototype.height=function(t){return t.height},t.prototype.toString=function(){return"linear-gradient("+this.parameters.join(",")+")"},t.prototype.clone=function(){return new t(this.parameters)},t.prototype.destroy=function(){this.canvas&&(l.Runtime.get().releaseCanvas(this.canvas),this.canvas=void 0)},t}(),m=function(){function t(t,e,i,n,r){this.imageClip=t,this.top=e,this.right=i,this.bottom=n,this.left=r,c.ResourceRegistry.DefaultInstance.add(this.imageClip.getSrc(),c.ResourceType.IMAGE)}return t.of=function(e){var i=d.StyleUtils.parse4Dirs(e[1]);return new t(u.ImageClip.of(e[0]),i[0],i[1],i[2],i[3])},t.prototype.draw=function(t,e,i){if(this.ready()){var n=this.imageClip.getWidth(),r=this.imageClip.getHeight(),o=this.left.getValue(n),a=this.right.getValue(n),h=n-o-a;h<0&&(a=n-(o=Math.round(o/(o+a)*n)),h=0),o+a>e.width&&(o=Math.round(o/(o+a)*e.width),a=e.width-o,h=0);var u=this.top.getValue(r),c=this.bottom.getValue(r),l=r-u-c;if(l<0&&(c=r-(u=Math.round(u/(u+c)*r)),l=0),u+c>e.height&&(u=Math.round(u/(u+c)*e.height),c=e.height-u,l=0),u>0&&(o>0&&this.imageClip.draw(t,new s.Rect(e.x,e.y,o,u),new s.Rect(0,0,o,u)),h>0&&e.width-o-a>0&&this.imageClip.draw(t,new s.Rect(e.x+o,e.y,e.width-o-a,u),new s.Rect(o,0,h,u)),a>0&&this.imageClip.draw(t,new s.Rect(e.x+e.width-a,e.y,a,u),new s.Rect(n-a,0,a,u))),l>0){var p=e.y+u,d=e.height-u-c;d>0&&(o>0&&this.imageClip.draw(t,new s.Rect(e.x,p,o,d),new s.Rect(0,u,o,l)),h>0&&e.width-o-a>0&&this.imageClip.draw(t,new s.Rect(e.x+o,p,e.width-o-a,d),new s.Rect(o,u,h,l)),a>0&&this.imageClip.draw(t,new s.Rect(e.width-a,p,a,d),new s.Rect(n-a,u,a,l)))}if(c>0){p=e.y+e.height-c;var f=r-c;o>0&&this.imageClip.draw(t,new s.Rect(e.x,p,o,c),new s.Rect(0,f,o,c)),h>0&&e.width-o-a>0&&this.imageClip.draw(t,new s.Rect(e.x+o,p,e.width-o-a,c),new s.Rect(o,f,h,c)),a>0&&this.imageClip.draw(t,new s.Rect(e.width-a,p,a,c),new s.Rect(n-a,f,a,c))}}},t.prototype.toString=function(){return"9patch("+this.args.join(",")+")"},t.prototype.ready=function(){return!0},t.prototype.width=function(t){return t.width},t.prototype.height=function(t){return t.height},t.prototype.clone=function(){return new t(this.imageClip.clone(),this.top.clone(),this.right.clone(),this.bottom.clone(),this.left.clone())},t.prototype.destroy=function(){},t}();!function(t){t.REPEAT="repeat",t.NO_REPEAT="no-repeat",t.SPACE="space",t.ROUND="round"}(g=e.BackgroundRepeatType||(e.BackgroundRepeatType={}));var E,w,T=function(){function t(t,e){this.x=t,this.y=e}return t.of=function(e){if(1===e.length){var i=e[0];return"repeat-x"===i?new t(g.REPEAT,g.NO_REPEAT):"repeat-y"===i?new t(g.NO_REPEAT,g.REPEAT):"repeat"===i?new t(g.REPEAT,g.REPEAT):"space"===i?new t(g.SPACE,g.SPACE):"round"===i?new t(g.ROUND,g.ROUND):"no-repeat"===i?new t(g.NO_REPEAT,g.NO_REPEAT):void 0}if(2===e.length){var n=p.EnumUtils.fromStringOrUndefined(g,e[0]),r=p.EnumUtils.fromStringOrUndefined(g,e[1]);if(!n||!r)return;return new t(n,n)}},t.prototype.clone=function(){return new t(this.x,this.y)},t.DEFAULT=new t(g.REPEAT,g.REPEAT),t}();!function(t){t.BORDER_BOX="border-box",t.PADDING_BOX="padding-box",t.CONTENT_BOX="content-box"}(E=e.BackgroundClip||(e.BackgroundClip={})),function(t){t.AUTO="auto",t.COVER="cover",t.CONTAIN="contain",t.VALUE="value"}(w=e.BackgroundSizeType||(e.BackgroundSizeType={}));var b,R=function(){function t(t,e,i,n){this.x=e,this.xType=t,this.y=n,this.yType=i}return t.of=function(e){var i,n,o=r.BaseValue.ZERO,s=r.BaseValue.ZERO;if(1===e.length){var a=e[0];if("auto"===a)i=n=w.AUTO;else if("cover"===a)i=n=w.COVER;else if("contain"===a)i=n=w.CONTAIN;else if(o=s=r.BaseValue.of(a),!s)return}else{if(2!==e.length)return;if("auto"===e[0])i=w.AUTO;else if(i=w.VALUE,!(o=r.BaseValue.of(e[0],!0)))return;if("auto"===e[1])n=w.AUTO;else if(n=w.VALUE,!(s=r.BaseValue.of(e[1],!0)))return}return new t(i,o,n,s)},t.prototype.clone=function(){return new t(this.xType,this.x.clone(),this.yType,this.y.clone())},t.DEFAULT=new t(w.AUTO,r.BaseValue.ZERO,w.AUTO,r.BaseValue.ZERO),t}();!function(t){t.LEFT="left",t.TOP="top",t.CENTER="center",t.BOTTOM="bottom",t.RIGHT="right"}(b||(b={}));var A=function(){function t(t,e,i,n){this.xDir=t,this.x=e,this.yDir=i,this.y=n}return t.acceptToken=function(t){return/^(left|center|right|top|bottom|[0-9\.]+|[0-9\.]+px|[0-9\.]+%)$/.test(t)},t.of=function(e){var i,n,o,s;if(1===e.length){var a=e[0];o=r.BaseValue.ZERO,s=r.BaseValue.ZERO,"left"!==a&&"right"!==a||(i=a,n=b.CENTER),"top"!==a&&"bottom"!==a||(i=b.CENTER,n=a),"center"===a?(i=b.CENTER,n=b.CENTER):(i=b.LEFT,o=r.BaseValue.of(a),n=b.CENTER)}else if(2===e.length){var h=e[0],u=e[1];if("top"!==h&&"bottom"!==h&&"left"!==u&&"right"!==u||(h=e[1],u=e[0]),"left"===h||"right"===h||"center"===h)i=h,o=r.BaseValue.ZERO;else if(i=b.LEFT,!(o=r.BaseValue.of(h)))return;if("top"===u||"bottom"===u||"center"===u)n=u,s=r.BaseValue.ZERO;else if(n=b.TOP,!(s=r.BaseValue.of(u)))return}else if(3===e.length){if("left"===e[0]||"right"===e[0])if(i=e[0],o=r.BaseValue.of(e[1])){if("top"!==e[2]&&"bottom"!==e[2]&&"center"!==e[2])return;n=e[2],s=r.BaseValue.ZERO}else{if(o=r.BaseValue.ZERO,"top"!==e[1]&&"bottom"!==e[1]&&"center"!==e[1])return;if(n=e[1],!(s=r.BaseValue.of(e[2])))return}else if("top"===e[0]||"bottom"===e[0])if(n=e[0],s=r.BaseValue.of(e[1])){if("left"!==e[2]&&"right"!==e[2]&&"center"!==e[2])return;i=e[2],o=r.BaseValue.ZERO}else{if(s=r.BaseValue.ZERO,"left"!==e[1]&&"right"!==e[1]&&"center"!==e[1])return;if(i=e[1],!(o=r.BaseValue.of(e[2])))return}}else{if(4!==e.length)return;if("left"===e[0]||"right"===e[0]?(i=e[0],o=r.BaseValue.of(e[1]),n=e[2],s=r.BaseValue.of(e[3])):"top"!==e[0]&&"bottom"!==e[0]||(i=e[2],o=r.BaseValue.of(e[3]),n=e[0],s=r.BaseValue.of(e[1])),!o||!s||"left"!==i&&"right"!==i||"top"!==n&&"bottom"!==n)return}return new t(i,o,n,s)},t.prototype.clone=function(){return new t(this.xDir,this.x.clone(),this.yDir,this.y.clone())},t.DEFAULT=new t(b.LEFT,r.BaseValue.ZERO,b.TOP,r.BaseValue.ZERO),t}(),O=function(){function t(){this.attachment=[],this.image=[],this.repeat=[],this.clip=[],this.origin=[],this.size=[],this.position=[],this.blendMode=[]}return t.of=function(e,i){void 0===i&&(i=!1);for(var r=this.split(e),s=new t,a=0,h=r;a<h.length;a++){for(var u=h[a],c=void 0,l=void 0,d=void 0,g=void 0,v=void 0,y=void 0,m=void 0,w=f.tokenize(u),b=0;b<w.length;++b){var O=w[b],B=p.EnumUtils.fromStringOrUndefined(E,O);if(B)if(g){if(v)return void(i||console.warn("invalid background:"+e+"\n<box> value appears 3 times in one layer"));v=B}else g=B;else{var S=p.EnumUtils.fromStringOrUndefined(n,O);if(S){if(c)return void(i||console.warn("invalid background:"+e+"\n<attachment> value appears twice in one layer"));c=S}else if(A.acceptToken(O)){if(m)return void(i||console.warn("invalid background:"+e+"\n<position> value appears twice in one layer"));var x=[O];for(++b;b<w.length&&A.acceptToken(w[b]);++b)x.push(w[b]);if(!(m=A.of(x)))return void(i||console.warn("invalid background:"+e+"\nbad <position> value"));if(b<w.length&&"/"===w[b]){if(b+2<w.length?(y=R.of([w[b+1],w[b+2]]))?b+=2:(y=R.of([w[b+1]]))&&++b:b+1<w.length&&(y=R.of([w[b+1]]))&&++b,!y)return void(i||console.warn("invalid background:"+e+"\nbad <size> value"))}else--b}else{var L=void 0;if(b+1<w.length&&(L=T.of([w[b],w[b+1]]))?b+=1:L=T.of([w[b]]),L){if(d)return void(i||console.warn("invalid background:"+e+"\n<repeat> value appears twice in one layer"));d=L}else{var I=this.parseImage(O);if(I){if(l)return void(i||console.warn("invalid background:"+e+"\n<image> value appears twice in one layer"));l=I}else{var C=o.Color.of(O);if(!C)return void(i||console.warn("invalid background:"+e+"\nunknown token:"+O));if(s.color)return void(i||console.warn("invalid background:"+e+"\n<color> value appears twice"));s.color=C}}}}}l&&(s.image.push(l),s.attachment.push(c||n.SCROLL),s.repeat.push(d||T.DEFAULT),s.clip.push(g||E.CONTENT_BOX),s.origin.push(v||E.PADDING_BOX),s.size.push(y||R.DEFAULT),s.position.push(m||A.DEFAULT),s.blendMode.push(""))}return s},t.parseImage=function(t){var e=h.FunctionParser.parse(t,!0);if(e)switch(e.name){case"url":return v.of(e.arguments);case"linear-gradient":return y.of(e.arguments);case"9patch":return m.of(e.arguments)}},t.split=function(t){for(var e=[],i=0,n=!1,r=t.length,o=0;o<r;++o){var s=t[o];if(n)")"===s&&(n=!1);else if("("===s)n=!0;else if(","===s){var a;if(i<o)(a=t.substring(i,o).trim())&&e.push(a);i=o+1}}i<r&&((a=t.substring(i).trim())&&e.push(a));return e},t.copyArray=function(t,e){for(var i=0,n=t;i<n.length;i++){var r=n[i];e.push(r)}},t.cloneArray=function(t,e){for(var i=0,n=t;i<n.length;i++){var r=n[i];r?e.push(r.clone()):e.push(void 0)}},t.getFromArray=function(t,e,i){return e>=t.length?i:t[e]},t.prototype.setColor=function(t){this.color=t instanceof o.Color?t:o.Color.of(t)},t.prototype.setAttachment=function(e){var i=t.split(e);this.attachment.length=0;for(var r=0,o=i;r<o.length;r++){o[r];this.attachment.push(n.SCROLL)}},t.prototype.setImage=function(e){var i=t.split(e);this.image.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n];this.image.push(t.parseImage(o))}},t.prototype.setBlendMode=function(e){var i=t.split(e);this.blendMode.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n];this.blendMode.push(o)}},t.prototype.setRepeat=function(e){var i=t.split(e);this.repeat.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=T.of(f.tokenize(o))||T.DEFAULT;this.repeat.push(s)}},t.prototype.setClip=function(e){var i=t.split(e);this.clip.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=p.EnumUtils.fromString(E,o,E.BORDER_BOX);this.clip.push(s)}},t.prototype.setOrigin=function(e){var i=t.split(e);this.origin.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=p.EnumUtils.fromString(E,o,E.BORDER_BOX);this.origin.push(s)}},t.prototype.setSize=function(e){var i=t.split(e);this.size.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=R.of(f.tokenize(o))||R.DEFAULT;this.size.push(s)}},t.prototype.setPosition=function(e){var i=t.split(e);this.position.length=0;for(var n=0,r=i;n<r.length;n++){var o=r[n],s=A.of(f.tokenize(o))||A.DEFAULT;this.position.push(s)}},t.prototype.draw=function(e,i,n,o){if(0===this.image.length&&this.color&&this.color.a>0){i.fillStyle=this.color.toString();var a=void 0;switch(l=t.getFromArray(this.clip,0,E.BORDER_BOX)){case E.PADDING_BOX:a=e.getPaddingRect();break;case E.CONTENT_BOX:a=e.getContentRect();break;default:a=new s.Rect(0,0,e.rect.width,e.rect.height)}return l===E.BORDER_BOX?n.clip(i):o.clip(i),void i.fillRect(a.x,a.y,a.width,a.height)}for(var h=this.image.length-1;h>=0;--h){var u=this.image[h];if(u){var c=void 0;switch(t.getFromArray(this.origin,h,E.BORDER_BOX)){case E.PADDING_BOX:c=e.getPaddingRect();break;case E.CONTENT_BOX:c=e.getContentRect();break;default:c=new s.Rect(0,0,e.rect.width,e.rect.height)}if(!(c.width<1||c.height<1)&&u.ready()){var l,p=void 0;switch(l=t.getFromArray(this.clip,h,E.BORDER_BOX)){case E.PADDING_BOX:p=e.getPaddingRect();break;case E.CONTENT_BOX:p=e.getContentRect();break;default:p=new s.Rect(0,0,e.rect.width,e.rect.height)}l===E.BORDER_BOX?n.clip(i):o.clip(i),this.color&&h===this.image.length-1&&(i.fillStyle=this.color.toString(),i.fillRect(p.x,p.y,p.width,p.height));var d=u.width(c),f=u.height(c),v=d,y=f,m=c.x,T=c.y,A=this.size.length>h?this.size[h]:R.DEFAULT;if(A.xType===w.CONTAIN)(O=d/f)>c.width/c.height?y=(v=c.width)/O:v=(y=c.height)*O;else if(A.xType===w.COVER){var O;(O=d/f)<c.width/c.height?y=(v=c.width)/O:v=(y=c.height)*O}else A.xType===w.VALUE&&(v=A.x.getValue(c.width)),A.yType===w.VALUE&&(y=A.y.getValue(c.height));if(!(v<1||y<1)){var B=v/d,S=y/f,x=g.NO_REPEAT,L=g.NO_REPEAT;this.repeat.length>h&&(x=this.repeat[h].x,L=this.repeat[h].y);var I=0,C=0;if(x===g.SPACE)for(I=1===(P=Math.floor(c.width/v))?c.width:(c.width-P*v)/(P-1),m=c.x;m>p.x;)m-=I+v;else if(x===g.ROUND){var P=Math.max(1,Math.floor(c.width/v+.5));for(B=(v=c.width/P)/d,m=c.x;m>p.x;)m-=v}else{if(this.position.length>h)(M=this.position[h]).xDir===b.CENTER?m+=50*(c.width-v)/100:M.xDir===b.RIGHT?M.x.unit===r.BaseValueUnit.PERCENTAGE?m+=(c.width-v)*(100-M.x.numberValue)/100:m+=c.width-v-M.x.numberValue:M.x.unit===r.BaseValueUnit.PERCENTAGE?m+=(c.width-v)*M.x.numberValue/100:m+=M.x.numberValue;if(x===g.REPEAT)for(;m>p.x;)m-=v}if(L===g.SPACE)for(C=1===(P=Math.floor(c.height/y))?c.height:(c.height-P*y)/(P-1),T=c.y;T>p.y;)T-=C+y;else if(L===g.ROUND){P=Math.max(1,Math.floor(c.height/y+.5));for(S=(y=c.height/P)/f,T=c.y;T>p.y;)T-=y}else{var M;if(this.position.length>h)(M=this.position[h]).yDir===b.CENTER?T+=50*(c.height-y)/100:M.yDir===b.BOTTOM?M.x.unit===r.BaseValueUnit.PERCENTAGE?T+=(c.height-y)*(100-M.y.numberValue)/100:T+=c.height-y-M.y.numberValue:M.y.unit===r.BaseValueUnit.PERCENTAGE?T+=(c.height-y)*M.y.numberValue/100:T+=M.y.numberValue;if(L===g.REPEAT)for(;T>p.y;)T-=y}var F=p.y+p.height,N=p.x+p.width;do{var D=m;do{this.drawImage(i,u,v,y,B,S,D,T,p),D+=I+v}while(D<N&&x!==g.NO_REPEAT);T+=C+y}while(T<F&&L!==g.NO_REPEAT)}}}}},t.prototype.clone=function(){var e=new t;return e.color=this.color,t.copyArray(this.attachment,e.attachment),t.cloneArray(this.image,e.image),t.copyArray(this.blendMode,e.blendMode),t.copyArray(this.clip,e.clip),t.copyArray(this.origin,e.origin),t.cloneArray(this.repeat,e.repeat),t.cloneArray(this.size,e.size),t.cloneArray(this.position,e.position),e},t.prototype.drawImage=function(t,e,i,n,r,o,a,h,u){var c=0,l=0;a<u.x&&(c=u.x-a,a=u.x),h<u.y&&(l=u.y-h,h=u.y);var p=i-c,d=n-l;p+a>u.width+u.x&&(p=u.width+u.x-a),d+h>u.height+u.y&&(d=u.height+u.y-h),e.draw(t,new s.Rect(a,h,p,d),new s.Rect(c/r,l/o,p/r,d/o))},t}();e.Background=O},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(1)),n(i(32))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=i(30),o=i(31),s=function(){this.duration=0,this.numPlays=0,this.frames=[]};e.ApngData=s;var a=function(){this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.dataParts=[]};e.ApngFrame=a;var h=new Uint8Array([137,80,78,71,13,10,26,10]);function u(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}function c(t){return[t>>>24&255,t>>>16&255,t>>>8&255,255&t]}var l=u("IHDR"),p=u("acTL"),d=u("IDAT"),f=u("fcTL"),g=u("fdAT"),v=u("IEND"),y=function(){function t(){}return t.parse=function(t,e){void 0===e&&(e=!1);for(var i=new Uint8Array(t),o=0;o<h.length;++o)if(h[o]!==i[o])return void(e||console.warn("not a png file"));for(var u=this.toChunks(i),y=[],m=[],E=null,w=null,T=new s,b=new DataView(i.buffer),R=0,A=u;R<A.length;R++){var O=A[R];switch(O.type){case l:E=i.subarray(O.start+8,O.end-4),T.width=b.getUint32(O.start+8),T.height=b.getUint32(O.start+8+4);break;case p:T.numPlays=b.getUint32(O.start+8);break;case f:w=new a,T.frames.push(w),w.width=b.getUint32(O.start+8+4),w.height=b.getUint32(O.start+8+8),w.left=b.getUint32(O.start+8+12),w.top=b.getUint32(O.start+8+16);var B=b.getUint16(O.start+8+20),S=b.getUint16(O.start+8+22);0===S&&(S=100),w.delay=1e3*B/S,w.delay<=10&&(w.delay=100),T.duration+=w.delay,w.disposeOp=b.getUint8(O.start+8+24),w.blendOp=b.getUint8(O.start+8+25),w.dataParts=[],1===T.frames.length&&2===w.disposeOp&&(w.disposeOp=1);break;case g:w?w.dataParts.push(this.makeChunk(d,i.subarray(O.start+12,O.end-4))):e||console.warn("invalid fdAT chunk before frame");break;case d:w?w.dataParts.push(this.makeChunk(d,i.subarray(O.start+8,O.end-4))):e||console.warn("invalid IDAT chunk before frame");break;case v:m.push(i.subarray(O.start,O.end));break;default:y.push(i.subarray(O.start,O.end))}}if(0!==T.frames.length){for(var x=function(t){var e=[];e.push(h),E.set(c(t.width),0),E.set(c(t.height),4),e.push(L.makeChunk(l,E));for(var i=0,o=y;i<o.length;i++){var s=o[i];e.push(s)}for(var a=0,u=t.dataParts;a<u.length;a++){s=u[a];e.push(s)}for(var p=0,d=m;p<d.length;p++){s=d[p];e.push(s)}switch(delete t.dataParts,n.Runtime.getRuntimeType()){case n.RuntimeType.WECHAT_MINI_GAME:t.image=n.Runtime.get().newImage();var f="data:image/png;base64,"+r.Base64.encode(e);t.image.src=f;break;case n.RuntimeType.WEBPAGE:var g=URL.createObjectURL(new Blob(e,{type:"image/png"})),v=new Image;t.image=v,v.src=g,v.onload=function(){URL.revokeObjectURL(g)},v.onerror=function(t){URL.revokeObjectURL(g)}}},L=this,I=0,C=T.frames;I<C.length;I++){x(C[I])}return T}e||console.warn("not a png file")},t.toChunks=function(t){for(var e=[],i=new DataView(t.buffer),n=8;n<=t.length-12;){var r=i.getUint32(n);if(r<0||n+12+r>t.length)return void console.warn("invalid chunk length, position="+n+" length="+r+" total="+t.length);var o=i.getUint32(n+4);if(e.push({type:o,start:n,end:n+r+12}),n+=12+r,o===v)break}return e},t.makeChunk=function(t,e){var i=new Uint8Array(e.length+12),n=new DataView(i.buffer);n.setUint32(0,e.length),n.setUint32(4,t),i.set(e,8);var r=o.CRC32.calculate(i,4,e.length+4);return n.setUint32(e.length+8,r),i},t}();e.ApngParser=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(){function t(){}return t.tripletToBase64=function(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]},t.next=function(t,e){if(t[e.i].length>e.j)return t[e.i][e.j++];for(;0===t[++e.i].length;);return e.j=1,t[e.i][0]},t.encode=function(t){for(var e=[],i=0,r=0,o=t;r<o.length;r++){var s=o[r];i+=s.length,e.push({size:s.length,current:0})}for(var a={i:0,j:0},h=i%3,u=[],c=Math.floor(i/3),l=0;l<c;++l)u.push(this.tripletToBase64((this.next(t,a)<<16&16711680)+(this.next(t,a)<<8&65280)+(255&this.next(t,a))));if(1===h){var p=this.next(t,a);u.push(n[p>>2]+n[p<<4&63]+"==")}else if(2===h){p=(this.next(t,a)<<8)+this.next(t,a);u.push(n[p>>10]+n[p>>4&63]+n[p<<2&63]+"=")}return u.join("")},t}();e.Base64=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n=new Uint32Array(256),r=0;r<256;r++){for(var o=r,s=0;s<8;s++)o=0!=(1&o)?3988292384^o>>>1:o>>>1;n[r]=o}var a=function(){function t(){}return t.calculate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length-e);for(var r=-1,o=e,s=e+i;o<s;o++)r=r>>>8^n[255&(r^t[o])];return-1^r},t}();e.CRC32=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(33),o=i(1);!function(t){t[t.Rotation0=0]="Rotation0",t[t.Rotation90=90]="Rotation90",t[t.Rotation180=180]="Rotation180",t[t.Rotation270=270]="Rotation270"}(n=e.ImageClipRotation||(e.ImageClipRotation={}));var s=/^(.+)#([0-9\.]+),([0-9\.]+),([0-9\.]+),([0-9\.]+)@?(0|90|180|270)?$/,a=function(){function t(t,e,i,r){void 0===i&&(i=n.Rotation0),void 0===r&&(r=1),this.scale=1,this.src=t,this.rect=e,this.rotation=i,this.scale=r}return t.of=function(e,i){void 0===i&&(i=!1);var n=e.match(s);return n?new t(n[1],new r.Rect(parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4]),parseFloat(n[5])),n[6]?parseInt(n[6]):0):e.indexOf("#")<0?new t(e):void(i||console.warn("invalid image clip:"+e))},t.prototype.ready=function(){return!!this.getImage()},t.prototype.getSrc=function(){return this.src},t.prototype.setImage=function(t){return this.image=t,this},t.prototype.setSrc=function(t){return this.src=t,this},t.prototype.getRect=function(){return this.rect},t.prototype.getRotation=function(){return this.rotation},t.prototype.getScale=function(){return this.scale},t.prototype.setRect=function(t){return this.rect=t,this},t.prototype.setRotation=function(t){return this.rotation=t,this},t.prototype.setScale=function(t){return this.scale=t,this},t.prototype.getImage=function(){return this.image?this.image:o.ResourceRegistry.DefaultInstance.get(this.src)},t.prototype.getWidth=function(){if(this.rect)return this.scale*(this.needChangeSize()?this.rect.height:this.rect.width);var t=this.getImage();return t?(this.needChangeSize()?t.height:t.width)*this.scale:0},t.prototype.needChangeSize=function(){return this.rotation===n.Rotation90||this.rotation===n.Rotation270},t.prototype.getHeight=function(){if(this.rect)return this.scale*(this.needChangeSize()?this.rect.width:this.rect.height);var t=this.getImage();return t?(this.needChangeSize()?t.width:t.height)*this.scale:0},t.prototype.draw=function(t,e,i){var o=this.getImage();if(o){var s=this.rect?this.rect.x:0,a=this.rect?this.rect.y:0,h=this.rect?this.rect.width:o.width,u=this.rect?this.rect.height:o.height;if(i)switch(this.rotation){case n.Rotation0:s+=i.x,a+=i.y,h=i.width,u=i.height;break;case n.Rotation90:s+=h-i.y-i.height,a+=i.x,h=i.height,u=i.width;break;case n.Rotation180:s+=h-i.x-i.width,a+=u-i.y-i.height,h=i.width,u=i.height;break;case n.Rotation270:s+=i.y,a+=u-i.x-i.width,h=i.height,u=i.width}switch(this.rotation){case n.Rotation0:t.drawImage(o,s,a,h,u,e.x,e.y,e.width,e.height);break;case n.Rotation90:t.save();new r.Matrix2D;t.translate(e.x,e.y),t.rotate(-Math.PI/2),t.drawImage(o,s,a,h,u,-e.height,0,e.height,e.width),t.restore();break;case n.Rotation180:t.save(),t.translate(e.x,e.y),t.rotate(Math.PI),t.drawImage(o,s,a,h,u,-e.width,-e.height,e.width,e.height),t.restore();break;case n.Rotation270:t.save(),t.translate(e.x,e.y),t.rotate(Math.PI/2),t.drawImage(o,s,a,h,u,0,-e.width,e.height,e.width),t.restore()}}},t.prototype.clone=function(){return new t(this.src,this.rect.clone(),this.rotation,this.scale).setImage(this.image)},t}();e.ImageClip=a},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(8)),n(i(9)),n(i(6)),n(i(21)),n(i(22)),n(i(4)),n(i(34))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),r=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.leftTopRadiusX=0,this.leftTopRadiusY=0,this.rightTopRadiusX=0,this.rightTopRadiusY=0,this.rightBottomRadiusX=0,this.rightBottomRadiusY=0,this.leftBottomRadiusX=0,this.leftBottomRadiusY=0,this.x1=t,this.y1=e,this.x2=i,this.y2=n}return t.prototype.toRect=function(){return new n.Rect(this.x1,this.y1,this.x2-this.x1+1,this.y2-this.y1+1)},t.prototype.applySize=function(t,e){return this.x2=this.x1+t-1,this.y2=this.y1+e-1,this},t.prototype.applyRadius=function(t,e,i,n){var r=this.x2-this.x1+1,o=this.y2-this.y1+1;if(t&&(this.leftTopRadiusX=t.value1.getValue(r),this.leftTopRadiusY=t.value2.getValue(o)),e&&(this.rightTopRadiusX=e.value1.getValue(r),this.rightTopRadiusY=e.value2.getValue(o)),i&&(this.leftBottomRadiusX=i.value1.getValue(r),this.leftBottomRadiusY=i.value2.getValue(o)),n&&(this.rightBottomRadiusX=n.value1.getValue(r),this.rightBottomRadiusY=n.value2.getValue(o)),this.leftTopRadiusX+this.rightTopRadiusX>r){var s=r/(this.leftTopRadiusX+this.rightTopRadiusX);this.leftTopRadiusX*=s,this.rightTopRadiusX*=s}if(this.leftBottomRadiusX+this.rightBottomRadiusX>r){s=r/(this.leftBottomRadiusX+this.rightBottomRadiusX);this.leftBottomRadiusX*=s,this.rightBottomRadiusX*=s}if(this.leftTopRadiusY+this.leftBottomRadiusY>o){s=o/(this.leftTopRadiusY+this.leftBottomRadiusY);this.leftTopRadiusY*=s,this.leftBottomRadiusY*=s}if(this.rightTopRadiusY+this.rightBottomRadiusY>o){s=o/(this.rightTopRadiusY+this.rightBottomRadiusY);this.rightTopRadiusY*=s,this.rightBottomRadiusY*=s}return this},t.prototype.applyBorder=function(e,i,n,r){if(0===e&&0===i&&0===n&&0===r)return this;var o=new t;return o.x1=this.x1+r,o.y1=this.y1+e,o.x2=this.x2-i,o.y2=this.y2-n,o.leftTopRadiusX=Math.max(0,this.leftTopRadiusX-r),o.leftTopRadiusY=Math.max(0,this.leftTopRadiusY-e),0!==o.leftTopRadiusX&&0!==o.leftTopRadiusY||(o.leftTopRadiusX=o.leftTopRadiusY=0),o.rightTopRadiusX=Math.max(0,this.rightTopRadiusX-i),o.rightTopRadiusY=Math.max(0,this.rightTopRadiusY-e),0!==o.rightTopRadiusX&&0!==o.rightTopRadiusY||(o.rightTopRadiusX=o.rightTopRadiusY=0),o.rightBottomRadiusX=Math.max(0,this.rightBottomRadiusX-i),o.rightBottomRadiusY=Math.max(0,this.rightBottomRadiusY-n),0!==o.rightBottomRadiusX&&0!==o.rightBottomRadiusY||(o.rightBottomRadiusX=o.rightBottomRadiusY=0),o.leftBottomRadiusX=Math.max(0,this.leftBottomRadiusX-r),o.leftBottomRadiusY=Math.max(0,this.leftBottomRadiusY-n),0!==o.leftBottomRadiusX&&0!==o.leftBottomRadiusY||(o.leftBottomRadiusX=o.leftBottomRadiusY=0),o},t.prototype.makePath=function(t,e,i){var n=this.x1,r=this.y1,o=this.x2+1,s=this.y2+1;i?(e?t.moveTo(n,r+this.leftTopRadiusY):t.lineTo(n,r+this.leftTopRadiusY),this.arcTo(n,r+this.leftTopRadiusY,n+this.leftTopRadiusX,r,i,t),this.arcTo(o-this.rightTopRadiusX,r,o,r+this.rightTopRadiusY,i,t),this.arcTo(o,s-this.rightBottomRadiusY,o-this.rightBottomRadiusX,s,i,t),this.arcTo(n+this.leftBottomRadiusX,s,n,s-this.leftBottomRadiusY,i,t),0!==this.leftTopRadiusX&&0!==this.leftTopRadiusY?t.lineTo(n,r+this.leftTopRadiusY):t.lineTo(n,r)):(e?t.moveTo(n,r+this.leftTopRadiusY):t.lineTo(n,r+this.leftTopRadiusY),this.arcTo(n,s-this.leftBottomRadiusY,n+this.leftBottomRadiusX,s,i,t),this.arcTo(o-this.rightBottomRadiusX,s,o,s-this.rightBottomRadiusY,i,t),this.arcTo(o,r+this.rightTopRadiusY,o-this.rightTopRadiusX,r,i,t),this.arcTo(n+this.leftTopRadiusX,r,n,r+this.leftTopRadiusY,i,t))},t.prototype.clip=function(t){return t.beginPath(),this.makePath(t,!0,!0),t.closePath(),t.clip(),this},t.prototype.arcTo=function(t,e,i,n,r,o){o.lineTo(t,e);var s=Math.abs(t-i),a=Math.abs(e-n),h=1e-6;if(!(s<h&&a<h))if(s<h||a<h)o.lineTo(i,n);else{var u=void 0,c=void 0,l=void 0;r?t<i&&e<n?(u=-Math.PI/2,c=t,l=n):t>i&&e<n?(u=0,c=i,l=e):t>i&&e>n?(u=Math.PI/2,c=t,l=n):(u=Math.PI,c=i,l=e):t<i&&e<n?(u=Math.PI,c=i,l=e):t>i&&e<n?(u=-Math.PI/2,c=t,l=n):t>i&&e>n?(u=0,c=i,l=e):(u=Math.PI/2,c=t,l=n),o.ellipse(c,l,s,a,0,u,u+(r?Math.PI/2:-Math.PI/2),!r)}},t}();e.RoundRect=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(9);!function(t){t.SOLID="solid"}(n=e.BorderStyle||(e.BorderStyle={}));var o=/^[\s]*([^\s]+)[\s]+([\w]+)[\s]+(.*)$/,s=function(){function t(t,e,i){this.width=0,this.style=n.SOLID,this.color=r.Color.NONE,this.width=t,this.style=e,this.color=i}return t.of=function(e,i){void 0===i&&(i=!1);var s=e.match(o);if(s){var a=r.Color.of(s[3],i);if(a)return new t(parseFloat(s[1]),n.SOLID,a);i||console.warn("invalid border:"+e)}else i||console.warn("invalid border:"+e)},t.prototype.toString=function(){return this.width.toString()+" "+this.style+" "+this.color.toString()},t.prototype.equals=function(t){return this.width===t.width&&this.style===t.style&&this.color.equals(t.color)},t.prototype.isEnable=function(){return this.width>0&&this.color.a>0},t.prototype.clone=function(){return new t(this.width,this.style,this.color.clone())},t.prototype.update=function(e,i){return new t(this.width+(e.width-this.width)*i,this.style,this.color.update(e.color,i))},t.prototype.convertFrom=function(e){var i=t.of(e+"");return void 0===i?new t(0,n.SOLID,r.Color.BLACK):i},t.prototype.isAnimatable=function(){return!0},t.DEFAULT=new t(0,n.SOLID,r.Color.BLACK),t}();e.Border=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r,o,s=i(13),a=i(10),h=i(18);!function(t){t.NORMAL="normal",t.ITALIC="italic",t.OBLIQUE="oblique"}(n=e.FontStyle||(e.FontStyle={})),function(t){t.NORMAL="normal",t.SMALL_CAPS="small-caps"}(r=e.FontVariant||(e.FontVariant={})),function(t){t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.W100="100",t.W200="200",t.W300="300",t.W400="400",t.W500="500",t.W600="600",t.W700="700",t.W800="800",t.W900="900"}(o=e.FontWeight||(e.FontWeight={}));var u=/(^|^.*\s+)([0-9]+[a-z]+[^\s]+)($|\s+(.*)$)/,c=function(){function t(t,e,i,s,a,h){this.style=t||n.NORMAL,this.variant=e||r.NORMAL,this.weight=i||o.NORMAL,this.size=s||16,this.lineHeight=a,this.family=h}return t.of=function(e,i){void 0===i&&(i=!1);var a=e.match(u);if(a){for(var c=new t,l=0,p=a[1].split(/\s+/);l<p.length;l++){var d=p[l];if("normal"!==(d=d.toLowerCase())){var f=s.EnumUtils.fromString(n,d,n.NORMAL);if(f===n.NORMAL){var g=s.EnumUtils.fromString(o,d,o.NORMAL);if(g===o.NORMAL){var v=s.EnumUtils.fromString(r,d,r.NORMAL);v===r.NORMAL||(c.variant=v)}else c.weight=g}else c.style=f}}var y=a[2].split(/\//);if(c.size=parseFloat(y[0]),isNaN(c.size))i||console.warn("invalid font:"+e);else{if(!(y.length>1)||(c.lineHeight=h.LineHeight.of(y[1],i),c.lineHeight))return c.family=a[3].trim(),c;i||console.warn("invalid font:"+e)}}else i||console.warn("invalid font:"+e)},t.prototype.toString=function(){return[this.style||n.NORMAL,this.variant||r.NORMAL,this.weight||o.NORMAL,this.lineHeight?this.size+"px/"+this.lineHeight.toString():this.size+"px",this.family||t.DEFAULT_FONT_FAMILY].join(" ")},t.prototype.measureTextWidth=function(t){return a.LayoutUtils.measureTextWidth(t,this)},t.prototype.clone=function(){return new t(this.style,this.variant,this.weight,this.size,this.lineHeight,this.family)},t.DEFAULT_FONT_FAMILY="sans-serif",t}();e.Font=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(9),r=i(17),o=function(){function t(t,e,i,n){this.offsetX=t,this.offsetY=e,this.blur=i,this.color=n}return t.of=function(e,i){void 0===i&&(i=!1);var o=(new r.CSSTokenizer).tokenize(e);if(4===o.length){var s=parseFloat(o[0]),a=parseFloat(o[1]),h=parseFloat(o[2]),u=n.Color.of(o[3],i);if(!(isNaN(s)||isNaN(a)||isNaN(h)||void 0===u))return new t(s,a,h,u);i||console.warn("invalid shadow:"+e)}else i||console.warn("invalid shadow:"+e)},t.prototype.toString=function(){return"[Shadow ("+this.color.toString()+" "+this.offsetX+" "+this.offsetY+" "+this.blur+")]"},t.prototype.clone=function(){return new t(this.offsetX,this.offsetY,this.blur,this.color)},t.prototype.isEnable=function(){return this.color.a>0&&(0!==this.offsetX||0!==this.offsetY||0!==this.blur)},t.prototype.update=function(e,i){return new t(this.offsetX+(e.offsetX-this.offsetX)*i,this.offsetY+(e.offsetY-this.offsetY)*i,this.blur+(e.blur-this.blur)*i,this.color.update(e.color,i))},t.prototype.convertFrom=function(e){var i=t.of(e+"");return void 0===i?new t(0,0,0,n.Color.BLACK):i},t.prototype.isAnimatable=function(){return!0},t}();e.Shadow=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isEmpty=function(t){if(!t)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},t}();e.ContainerUtils=n},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),s=i(11),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animations=[],e}return r(e,t),e.prototype.create=function(t,e){(e||"number"!=typeof t)&&this.removeByTarget(t);var i=new s.Animation(t);return this.animations.push(i),i},e.prototype.removeByTarget=function(t){for(var e=0,i=this.animations;e<i.length;e++){var n=i[e];n.target===t&&n.state===s.AnimationState.RUNNING&&n.cancel()}},e.prototype.clear=function(){for(var t=0,e=this.animations;t<e.length;t++){e[t].cancel()}},e.prototype.onInterval=function(){var t=this.animations.length;if(0===t)return!1;for(var e=!1,i=0;i<t;++i)this.animations[i].onInterval()&&(e=!0);e&&this.dispatchEvent(new o.Event("update",!1,!0));for(i=this.animations.length-1;i>=0;--i){var n=this.animations[i];n.state!==s.AnimationState.COMPLETED&&n.state!==s.AnimationState.CANCELLED||this.animations.splice(i,1)}return e},e}(o.EventDispatcher);e.AnimationFactory=a},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(11),s=i(3),a=i(1),h=i(14),u=i(41),c=i(0),l=function(t){function e(e){var i=t.call(this,e,1e3*e.spriteSheet.frames.length/e.spriteSheet.fps)||this;return i.sprite=e,i}return r(e,t),e.prototype.onUpdate=function(t){if(this.sprite.spriteSheet&&0!==this.sprite.spriteSheet.frames.length){var e=Math.min(this.sprite.spriteSheet.frames.length-1,Math.floor(this.sprite.spriteSheet.frames.length*t));return e===this.sprite.currentFrame?void 0:(this.sprite.currentFrame=e,this.sprite.dispatchEvent(new c.XObjectEvent("update",!0,!0,this.sprite)),{currentFrame:e})}},e}(o.AnimationStep),p=function(t){function e(e){var i=t.call(this,e)||this;return i.currentFrame=0,e&&e.attributes&&e.attributes.src&&a.ResourceRegistry.DefaultInstance.add(e.attributes.src,a.ResourceType.JSON).then((function(t){i.setSpriteSheet(t),i.dispatchEvent(new c.XObjectEvent("load",!1,!0,i))})),i}return r(e,t),e.prototype.setSpriteSheet=function(t){var e=this;if(this.spriteSheet=t,this.spriteSheet){this.spriteSheet.url&&a.ResourceRegistry.DefaultInstance.add(this.spriteSheet.url,a.ResourceType.IMAGE);for(var i=0,n=this.spriteSheet.frames;i<n.length;i++){var r=n[i];r.url&&a.ResourceRegistry.DefaultInstance.add(r.url,a.ResourceType.IMAGE).then((function(){e.dispatchEvent(new c.XObjectEvent("update",!0,!0,e))}))}}return this.dispatchEvent(new c.XObjectEvent("update",!0,!0,this)),this},e.prototype.getStage=function(){for(var t=this;t;){if(t instanceof u.Stage)return t;t=t.parent}},e.prototype.play=function(t){var e=this;void 0===t&&(t=-1),this.animation&&(this.animation.cancel(),this.animation=void 0);var i=this.getStage();return i&&(this.animation=i.animate(this).addStep(new l(this)).times(t),this.animation.addEventListener("complete",(function(){return e.dispatchEvent(new c.XObjectEvent("stop",!1,!0,e))})),this.dispatchEvent(new c.XObjectEvent("play",!1,!0,this))),this},e.prototype.pause=function(){return this.animation&&this.animation.pause()&&this.dispatchEvent(new c.XObjectEvent("pause",!1,!0,this)),this},e.prototype.resume=function(){return this.animation&&this.animation.resume()&&this.dispatchEvent(new c.XObjectEvent("resume",!1,!0,this)),this},e.prototype.stop=function(){return this.animation&&(this.animation.cancel(),this.animation=void 0),this},e.prototype.times=function(t){return this.play(t)},e.prototype.setCurrentFrame=function(t){return this.currentFrame=t,this},e.prototype.toNextFrame=function(){return this.currentFrame=(this.currentFrame+1)%this.spriteSheet.frames.length,this},e.prototype.toPreviousFrame=function(){return this.currentFrame=(this.currentFrame-1+this.spriteSheet.frames.length)%this.spriteSheet.frames.length,this},e.prototype.drawContent=function(t){if(this.spriteSheet&&0!==this.spriteSheet.frames.length){var e=this.spriteSheet.frames[this.currentFrame];h.DrawUtils.drawFrame(t,this.getContentRect(),e,this.spriteSheet)}},e}(c.XObject);e.Sprite=p,s.HtmlParser.registerTag("sprite",p)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(39),h=i(1),u=i(2),c=i(42),l=i(43),p=i(10),d=i(19),f=i(7),g=i(0);!function(t){t.NEVER="never",t.ALWAYS="always"}(o=e.StageLayoutPolicy||(e.StageLayoutPolicy={})),function(t){t.NEVER="never",t.AUTO="auto",t.ALWAYS="always"}(s=e.StageUpdatePolicy||(e.StageUpdatePolicy={}));var v=function(){function t(){this.touchItems=[]}return t.prototype.contains=function(t){for(var e=0,i=this.touchItems;e<i.length;e++){if(i[e].identifier===t)return!0}return!1},t.prototype.get=function(t){for(var e=0,i=this.touchItems;e<i.length;e++){var n=i[e];if(n.identifier===t)return n}},t.prototype.add=function(t){this.touchItems.push(t)},t.prototype.remove=function(t){for(var e=0;e<this.touchItems.length;++e)if(this.touchItems[e].identifier===t)return void this.touchItems.splice(e,1)},t.prototype.getTouches=function(t){for(var e=[],i=0,n=this.touchItems;i<n.length;i++){var r=n[i];(r.srcElement===t||r.srcElement.isChildOf(t))&&e.push(r)}return e},t}(),y=function(t){function e(e,i){void 0===i&&(i={});var n=t.call(this)||this;for(var r in n.option={fps:60,layoutPolicy:o.ALWAYS,updatePolicy:s.AUTO,autoClear:!0},n.touchItems=new v,n.started=!1,n.needUpdate=!1,n.eventHandlerInstalled=!1,n.eventEnabled=!0,i)n.option[r]=i[r];return n.canvas=e,n.css({width:"100%",height:"100%",left:0,top:0}),i.style&&n.css(i.style),i.recordRenderLatencies&&(n.latestRenderLatencies=new l.LatestList),i.noEventHandler||n.installEventHandlers(),n.ticker=new c.Ticker(n.option.fps),n.animationFactory=new a.AnimationFactory,n.resourceRegistry=new h.ResourceRegistry,n}return r(e,t),e.prototype.updateOnce=function(){this.needUpdate=!0},e.prototype.start=function(){var t=this;this.started||(this.started=!0,this.layout(),this.needUpdate=!0,this.ticker.addEventListener("tick",(function(e){t.animationFactory.onInterval(),t.option.updatePolicy===s.NEVER||!t.needUpdate&&t.option.updatePolicy!==s.ALWAYS||(t.update(),t.needUpdate=!1)})),h.ResourceRegistry.DefaultInstance.addEventListener("load",(function(e){t.updateOnce()})),this.on("update",(function(){t.updateOnce()})))},e.prototype.installEventHandlers=function(){this.eventHandlerInstalled||(this.eventHandlerInstalled=!0,u.Runtime.get().enableEvents(this))},e.prototype.enableEvents=function(){return this.eventEnabled=!0,this},e.prototype.disableEvents=function(){return this.eventEnabled=!1,this},e.prototype.getPressedTouchItems=function(t){t||(t=this);for(var e=[],i=0,n=this.touchItems.getTouches(t);i<n.length;i++){var r=n[i];r.pressed&&e.push(r.clone())}return e},e.prototype.handleMouseOrTouchEvent=function(t,e,i){if(this.eventEnabled&&this.isVisible())switch(t){case"mousedown":case"touchstart":this.handleTouchStartEvent(e,i);break;case"mouseup":this.onTouchMove(e,i),this.handleTouchEndEvent([],i);break;case"touchend":case"touchcancel":this.handleTouchEndEvent(e,i);break;case"mousemove":case"touchmove":case"mouseleave":this.onTouchMove(e,i)}},e.prototype.handleMouseWheelEvent=function(t,e,i,n,r){var o=this.globalToLocal(t,e),s=this.getObjectUnderPoint(o.x,o.y,!0);if(s){var a=new f.TouchItem(0,s,t,e,Date.now());a.deltaX=i,a.deltaY=n,this.dispatchTouchEvent(s,"mousewheel",a,!0,!0,r)}},e.of=function(t){for(;t.parent;)t=t.parent;return t instanceof e?t:void 0},e.prototype.update=function(){if(this.canvas&&this.isVisible()){var t=Date.now(),e=this.canvas.getContext("2d");e&&(this.option.layoutPolicy===o.ALWAYS&&this.layout(),this.option.autoClear&&e.clearRect(0,0,this.getWidth(),this.getHeight()),e.save(),this.updateContext(e),this.draw(e,!1),e.restore(),this.latestRenderLatencies&&this.latestRenderLatencies.add(Date.now()-t))}},e.prototype.calculateSize=function(){if(this.canvas&&this.isVisible()){var t=this.canvas.width||this.canvas.clientWidth,e=this.canvas.height||this.canvas.clientHeight;p.LayoutUtils.updateSize(this,t,e),p.LayoutUtils.updatePositionForAbsoluteElement(this,t,e)}},e.prototype.toString=function(){return"[Stage (id="+this.id+")]"},e.prototype.dispatchTouchEvent=function(t,e,i,n,r,o){var s=new g.XObjectEvent(e,n,r,t,i);s.stage=this,s.nativeEvent=o,t.dispatchEvent(s)},e.prototype.onTouchMove=function(t,e){for(var i=[],n=[],r=0,o=t;r<o.length;r++){var s=o[r],a=this.touchItems.get(s.identifier);a?a.stageX===s.stageX&&a.stageY===s.stageY||(a.onUpdate(s),i.push(a)):n.push(s)}for(var h=0,u=i;h<u.length;h++){s=u[h];var c=this.globalToLocal(s.stageX,s.stageY);if((g=this.getObjectUnderPoint(c.x,c.y,!0))&&this.dispatchTouchEvent(g,"move",s,!0,!0,e),s.pressed&&this.dispatchTouchEvent(s.srcElement,"pressmove",s,!0,!0,e),g){if(s.currentTarget!==g){var l=g,p=s.currentTarget;for(s.currentTarget=g;p&&!l.isChildOf(p)&&l!==p;)this.dispatchTouchEvent(p,"leave",s,!1,!0,e),p=p.parent;for(;l&&l!==p;)this.dispatchTouchEvent(l,"enter",s,!1,!0,e),l=l.parent}}else s.currentTarget&&(this.dispatchTouchEvent(s.currentTarget,"leave",s,!1,!0,e),s.currentTarget=void 0)}for(var d=0,f=n;d<f.length;d++){var g;s=f[d],c=this.globalToLocal(s.stageX,s.stageY);if(g=this.getObjectUnderPoint(c.x,c.y,!0)){var v=s.switchSourceElement(g);v.pressed=!1,v.currentTarget=g,this.touchItems.add(v),this.dispatchTouchEvent(g,"move",v,!0,!0,e),this.dispatchTouchEvent(g,"enter",v,!1,!0,e)}}},e.prototype.handleTouchStartEvent=function(t,e){for(var i=new v,n=0,r=t;n<r.length;n++){var o=r[n],s=this.touchItems.get(o.identifier);if(!s||!s.pressed){s&&this.touchItems.remove(s.identifier);var a=this.getObjectUnderPoint(o.stageX,o.stageY,!0);if(a)(c=o.switchSourceElement(a)).currentTarget=a,c.pressed=!0,i.add(c),this.touchItems.add(c)}}for(var h=0,u=i.touchItems;h<u.length;h++){var c=u[h];this.dispatchTouchEvent(c.srcElement,"touchdown",c,!0,!0,e)}this.onTouchMove(t,e)},e.prototype.handleTouchEndEvent=function(t,e){this.onTouchMove(t,e);for(var i=new v,n=0,r=this.touchItems.touchItems;n<r.length;n++){for(var o=r[n],s=!1,a=0,h=t;a<h.length;a++){if(h[a].identifier===o.identifier){s=!0;break}}s||i.add(o)}for(var u=0,c=i.touchItems;u<c.length;u++){o=c[u];this.touchItems.remove(o.identifier)}for(var l=0,p=i.touchItems;l<p.length;l++){if((o=p[l]).pressed){var d=this.getObjectUnderPoint(o.stageX,o.stageY,!0);d&&this.dispatchTouchEvent(d,"touchup",o,!0,!0,e),this.dispatchTouchEvent(o.srcElement,"pressup",o,!0,!0,e),(d===o.srcElement||o.srcElement.isChildOf(d))&&this.dispatchTouchEvent(d,"click",o,!0,!0,e)}}},e}(d.Container);e.Stage=y},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),s=i(2),a=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.now=i,r.delay=n,r}return r(e,t),e}(o.Event);e.TickerEvent=a;var h=function(t){function e(e){void 0===e&&(e=60);var i=t.call(this)||this;return i.duration=1e3/60,i.stopped=!0,e<=0&&(console.warn("invalid fps:"+e+", reset to 60"),e=60),i.setFps(e),i.lastTickTime=0,i.start(),i}return r(e,t),e.prototype.setFps=function(t){this.duration=1e3/t},e.prototype.start=function(){if(this.stopped){this.stopped=!1,s.Runtime.get().requestAnimationFrame(this.onAnimationFrame.bind(this));var t=Date.now();this.dispatchEvent(new a("start",t,t-this.lastTickTime))}},e.prototype.stop=function(){this.stopped=!0;var t=Date.now();this.dispatchEvent(new a("stop",t,t-this.lastTickTime))},e.prototype.onAnimationFrame=function(t){this.stopped||(t-this.lastTickTime>=this.duration&&(this.dispatchEvent(new a("tick",t,0===this.lastTickTime?0:t-this.lastTickTime)),this.lastTickTime=t),s.Runtime.get().requestAnimationFrame(this.onAnimationFrame.bind(this)))},e}(o.EventDispatcher);e.Ticker=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){void 0===t&&(t=10),this.elements=[],this.capacity=t}return t.prototype.add=function(t){for(;this.elements.length>=this.capacity;)this.elements.shift();return this.elements.push(t),this},t}();e.LatestList=n},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(45)),n(i(33)),n(i(47)),n(i(53)),n(i(28)),n(i(54)),n(i(55)),n(i(56));var r=i(42);e.Ticker=r.Ticker},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(20)),n(i(11)),n(i(39))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=function(){function t(t,e){void 0===e&&(e=t),this.value1=t,this.value2=e}return t.of=function(e,i){if(void 0===i&&(i=!1),"number"==typeof e)return new t(n.BaseValue.of(e));var r=e.split(/\s+/),o=void 0,s=void 0;return 1===r.length?o=s=n.BaseValue.of(r[0]):2===r.length&&(o=n.BaseValue.of(r[0]),s=n.BaseValue.of(r[1])),o&&s?new t(o,s):void(i||console.warn("invalid border:"+e))},t.prototype.toString=function(){return this.value1.toString()+" "+this.value2.toString()},t.prototype.clone=function(){return new t(this.value1,this.value2)},t.prototype.update=function(e,i){return new t(this.value1.update(e.value1,i),this.value2.update(e.value2,i))},t.prototype.convertFrom=function(e){var i=t.of(e+"");return void 0===i?new t(n.BaseValue.ZERO,n.BaseValue.ZERO):i},t.prototype.isAnimatable=function(){return!0},t}();e.BorderRadius=r},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(48)),n(i(49)),n(i(19)),n(i(50)),n(i(51)),n(i(40)),n(i(41)),n(i(52)),n(i(7)),n(i(0))},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),s=i(1),a=function(t){function e(e){var i=t.call(this,e)||this;return e&&e.attributes&&e.attributes.src&&s.ResourceRegistry.DefaultInstance.add(e.attributes.src,s.ResourceType.APNG).then((function(t){i.setSpriteSheet(t).play()})).catch((function(t){console.warn("failed to load:"+e.attributes.src,t)})),i}return r(e,t),e}(i(40).Sprite);e.Apng=a,o.HtmlParser.registerTag("apng",a)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),s=i(3),a=i(1),h=i(5),u=i(14),c=i(0),l=function(t){function e(e){var i=t.call(this,e)||this;return i.text="",e&&(i.text=e.text||"",e.attributes&&e.attributes.src&&a.ResourceRegistry.DefaultInstance.add(e.attributes.src,a.ResourceType.JSON).then((function(t){i.setBitmapTextSheet(t)}))),i}return r(e,t),e.prototype.setBitmapTextSheet=function(t){var e=this;if(this.bitmapTextSheet=t,this.bitmapTextSheet)for(var i in this.bitmapTextSheet.url&&a.ResourceRegistry.DefaultInstance.add(this.bitmapTextSheet.url,a.ResourceType.IMAGE).then((function(){e.dispatchEvent(new c.XObjectEvent("update",!0,!0,e))})),this.bitmapTextSheet.texts){var n=this.bitmapTextSheet.texts[i];n.url&&a.ResourceRegistry.DefaultInstance.add(n.url,a.ResourceType.IMAGE).then((function(){e.dispatchEvent(new c.XObjectEvent("update",!0,!0,e))}))}},e.prototype.setText=function(t){this.text!==t&&(this.text=t,this.dispatchEvent(new c.XObjectEvent("update",!0,!0,this)))},e.prototype.getText=function(){return this.text},e.prototype.drawContent=function(t){if(!(""===this.text||!this.bitmapTextSheet||this.rect.width<=0||this.rect.height<=0)){var e=this.getContentRect(),i=this.text.split("\n");t.save();for(var n=0,r=i;n<r.length;n++){for(var s=r[n],a=this.bitmapTextSheet.height||0,c=0,l=0,p=s;l<p.length;l++){var d=p[l];if(m=this.bitmapTextSheet.texts[d])c+=(E=u.DrawUtils.getFrameSize(m,this.bitmapTextSheet)).width+(this.bitmapTextSheet.gapX||0)}var f=e.x;switch(this.style.textAlign){case h.TextAlign.CENTER:f+=Math.max(0,(e.width-c)/2);break;case h.TextAlign.RIGHT:f+=e.width-c}for(var g=e.y,v=0,y=s;v<y.length;v++){var m;d=y[v];if(m=this.bitmapTextSheet.texts[d]){var E=u.DrawUtils.getFrameSize(m,this.bitmapTextSheet),w=new o.Rect(f,g,E.width,E.height);u.DrawUtils.drawFrame(t,w,m,this.bitmapTextSheet),f+=w.width+(this.bitmapTextSheet.gapX||0),a=Math.max(a,E.height)}}g+=a+(this.bitmapTextSheet.gapY||0)}return t.restore(),!0}},e.prototype.layout=function(){if(t.prototype.layout.call(this),this.bitmapTextSheet){for(var e=this.text.split("\n"),i=this.getContentRect(),n=0,r=0,o=0,s=e;o<s.length;o++){for(var a=s[o],h=0,c=this.bitmapTextSheet.height||0,l=0,p=a;l<p.length;l++){var d=p[l],f=this.bitmapTextSheet.texts[d],g=u.DrawUtils.getFrameSize(f,this.bitmapTextSheet);h>0&&!isNaN(this.bitmapTextSheet.gapX)&&(h+=this.bitmapTextSheet.gapX),h+=g.width,c=Math.max(c,g.height)}r>0&&!isNaN(this.bitmapTextSheet.gapY)&&(r+=this.bitmapTextSheet.gapY),r+=c,n=Math.max(n,h)}n>i.width&&(this.rect.width+=n-i.width),r>i.height&&(this.rect.height+=r-i.height)}},e}(c.XObject);e.BitmapText=l,s.HtmlParser.registerTag("bitmaptext",l)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),s=i(3),a=i(32),h=i(1),u=i(0),c=function(t){function e(e){var i=t.call(this,e)||this;return e&&e.attributes&&(e.attributes.src&&i.setSrc(e.attributes.src),e.attributes.sourcerect&&i.setSourceRect(o.Rect.of(e.attributes.sourcerect))),i.imageClip||(i.imageClip=a.ImageClip.of("")),i}return r(e,t),e.prototype.setSrc=function(t){var e=this;return this.imageClip=a.ImageClip.of(t),h.ResourceRegistry.DefaultInstance.add(this.imageClip.getSrc(),h.ResourceType.IMAGE).then((function(t){e.dispatchEvent(new u.XObjectEvent("update",!0,!0,e))})),this},e.prototype.setImage=function(t){return this.imageClip.setImage(t),this},e.prototype.setSourceRect=function(t){return this.imageClip.setRect(t),this},e.prototype.calculateSize=function(){t.prototype.calculateSize.call(this),this.style.width||(this.rect.width=this.imageClip.getWidth()),this.style.height||(this.rect.height=this.imageClip.getHeight())},e.prototype.drawContent=function(t){this.imageClip.draw(t,this.getContentRect())},e}(u.XObject);e.Img=c,s.HtmlParser.registerTag("img",c),s.HtmlParser.registerTag("image",c)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),s=i(3),a=i(19),h=i(0),u=function(t){function e(e){var i=t.call(this,e)||this;return i.viewRect=new o.Rect(0,0,0,0),i.verticalSnappingSize=0,i.horizontalSnappingSize=200,i.on("pressmove",(function(t){i.scroll(t.touchItem.getDelta()),t.stage.updateOnce()})),i.on("mousewheel",(function(t){var e=t.touchItem.getDelta();e.x=-e.x,e.y=-e.y,i.scroll(e,!1),t.stage.updateOnce()})),i.on("pressup",(function(t){0===t.stage.getPressedTouchItems(i).length&&(i.onRelease(t.stage),t.stage.updateOnce())})),i}return r(e,t),e.prototype.getDefaultStyle=function(){return{overflow:"hidden"}},e.prototype.fixPosition=function(t,e,i){return t>i?i:t<e?e:t},e.prototype.scroll=function(t,e){void 0===e&&(e=!0),this.viewRect.x=this.fixPosition(this.viewRect.x+t.x,Math.min(0,this.getContentWidth()-this.viewRect.width)-(e?this.horizontalSnappingSize:0),e?this.horizontalSnappingSize:0),this.viewRect.y=this.fixPosition(this.viewRect.y+t.y,Math.min(0,this.getContentHeight()-this.viewRect.height)-(e?this.verticalSnappingSize:0),e?this.verticalSnappingSize:0)},e.prototype.onRelease=function(t){var e=this,i={x:this.fixPosition(this.viewRect.x,Math.min(0,this.getContentWidth()-this.viewRect.width),0),y:this.fixPosition(this.viewRect.y,Math.min(0,this.getContentHeight()-this.viewRect.height),0)};i.x===this.viewRect.x&&i.y===this.viewRect.y||t.animate({x:this.viewRect.x,y:this.viewRect.y},!0).to(i,200,"quadIn").on("update",(function(t){void 0!==i.x&&(e.viewRect.x=t.value.x),void 0!==i.y&&(e.viewRect.y=t.value.y),e.dispatchEvent(new h.XObjectEvent("update",!0,!0,e))}))},e.prototype.layoutChildren=function(){t.prototype.layoutChildren.call(this),this.viewRect.width=0,this.viewRect.height=0;for(var e=this.getPaddingRect(),i=0,n=this.children;i<n.length;i++){var r=n[i];this.viewRect.width=Math.max(this.viewRect.width,r.rect.x+r.getOuterWidth()-e.x),this.viewRect.height=Math.max(this.viewRect.height,r.rect.y+r.getOuterHeight()-e.y),r.rect.x+=this.viewRect.x,r.rect.y+=this.viewRect.y}},e}(a.Container);e.Scrollable=u,s.HtmlParser.registerTag("scrollable",u)},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),s=i(5),a=i(0),h=function(t){function e(e){var i=t.call(this,e)||this;return i.text="",i.text=e&&e.text||"",i}return r(e,t),e.prototype.getDefaultStyle=function(){return{color:"black",fontSize:26}},e.prototype.setText=function(t){this.text!==t&&(this.text=t,this.dispatchEvent(new a.XObjectEvent("update",!0,!0,this)))},e.prototype.getText=function(){return this.text},e.prototype.drawContent=function(t){if(""!==this.text&&this.style.font){var e=this.getContentRect();t.save(),t.textBaseline="middle",t.textAlign=this.style.textAlign,t.fillStyle=this.style.color.toString(),t.font=this.style.font.toString();var i,n=this.style.textBorder&&this.style.textBorder.isEnable();n&&(t.strokeStyle=this.style.textBorder.color.toString(),t.lineWidth=this.style.textBorder.width),this.style.textShadow&&this.style.textShadow.isEnable()&&(t.shadowBlur=this.style.textShadow.blur,t.shadowColor=this.style.textShadow.color.toString(),t.shadowOffsetX=this.style.textShadow.offsetX,t.shadowOffsetY=this.style.textShadow.offsetY),i=this.style.textAlign===s.TextAlign.RIGHT?e.x+e.width:this.style.textAlign===s.TextAlign.CENTER?e.x+e.width/2:e.x;var r=e.y,o=this.text.split("\n"),a=this.getLineHeight();r+=a/2;for(var h=0,u=o;h<u.length;h++){var c=u[h];""!==c.trim()&&(n?this.style.textBorderPosition===s.TextBorderPosition.OUTER?(t.strokeText(c,i,r),t.fillText(c,i,r)):(t.fillText(c,i,r),t.strokeText(c,i,r)):t.fillText(c,i,r)),r+=a}return t.restore(),!0}},e.prototype.layout=function(){if(t.prototype.layout.call(this),this.style.font){for(var e=this.text.split("\n"),i=this.getContentRect(),n=0,r=0,o=e;r<o.length;r++){var s=o[r];n=Math.max(n,this.style.font.measureTextWidth(s))}n>i.width&&(this.rect.width+=n-i.width);var a=this.getLineHeight()*e.length;a>i.height&&(this.rect.height+=a-i.height)}},e}(a.XObject);e.Text=h,o.HtmlParser.registerTag("text",h)},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(29)),n(i(17)),n(i(15)),n(i(3))},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(2)),n(i(23)),n(i(24)),n(i(25))},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(27)),n(i(35)),n(i(36)),n(i(18)),n(i(37)),n(i(5))},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(30)),n(i(38)),n(i(31)),n(i(57)),n(i(14)),n(i(13)),n(i(43)),n(i(10)),n(i(26)),n(i(16)),n(i(12))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.delayHandler=0,this.paused=!1,this.delayTime=t}return t.prototype.call=function(t){this.func=t,this.paused||(this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.start())},t.prototype.pause=function(){this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.paused=!0},t.prototype.resume=function(){this.paused&&(this.paused=!1,this.func&&this.start())},t.prototype.cancel=function(){this.delayHandler&&(clearTimeout(this.delayHandler),this.delayHandler=0),this.func=void 0,this.paused=!1},t.prototype.start=function(){var t=this;this.func&&(this.delayHandler=setTimeout((function(){t.delayHandler=0,t.func&&(t.func(),t.func=void 0)}),this.delayTime))},t}();e.Delay=n}])}));